1998-10-30  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/gencat.c: Do a better job in initializing dynamic
	memory [PR libc/844].

1998-10-29  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (vfprintf): Fix the remaining premature
	returns without cleaning up the lock.
	(printf_unknown): Add label all_done.

1998-10-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h (asinh): Put __sgn1 call outside log1p
	call.

1998-10-25  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzset.c (tz_compute): If time to switch to DST is later in
	the year switch back in the next year.
	Reported by jwitford@hutch.com.au.

1998-10-15 09:29  Ulrich Drepper  <drepper@cygnus.com>

	* time/africa: Update from latest tzdata release.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/backward: Likewise.
	* time/etcetera: Likewise.
	* time/europe: Likewise.
	* time/northamerica: Likewise.
	* time/southamerica: Likewise.

1998-10-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/ioperm.c (inline_outb): Fix output
	parameter format string.
	(inline_outw): Likewise.

1998-10-12 14:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/opendir.c: Test whether NAME is directory before
	opening it.

1998-10-08  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Fix typo.  Patch by Christian Gafton.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c (platform): Add missing
	Ruffian entry.
	Patch by Christian Gafton.

	* sysdeps/unix/sysv/linux/Makefile [subdir==misc]
	(sysdep_headers): Remove sys/debugreg.h.
	* sysdeps/unix/sysv/linux/i386/Makefile [subdir==misc]
	(sysdep_headers): Add sys/debugreg.h.

	* time/mktime.c: Update from glibc 2.1.

1998-10-08  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c: Fix one more memory leak.

1998-10-07 07:57  H.J. Lu  <hjl@gnu.org>

	* elf/dl-close.c (_dl_close): Fix a memory leak.

1998-09-02 19:18  H.J. Lu  <hjl@gnu.org>

	* elf/dl-open.c (_dl_open): Don't put the shared object on the
	global scope list twice.

	* elf/dl-close.c (_dl_close): Update _dl_global_scope[2] if the
	first object on the list is removed.

1998-10-07 16:48  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Improve the autodetection
	of the weird alpha architectures.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-10-07 10:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Remove sys/debugreg.h.
	* sysdeps/unix/sysv/linux/i386/Dist: Add sys/debugreg.h.
	* sysdeps/unix/sysv/linux/i386/sys/debugreg.h: New file.
	* sysdeps/unix/sysv/linux/sys/debugreg.h: Removed.

1998-10-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getcwd.c (__getcwd): Use temporary variable to
	store result of realloc instead of using BUF.

1998-10-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/sgtty.h (_SGTTY_H): Correct spelling.
	Reported by Rouben Rostamian <rostamian@umbc.edu> [PR libc/817].

1998-10-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Obstacks): Document
	obstack_alloc_failed_handler usage.

	* malloc/obstack.h: Enhance comment about
	obstack_alloc_failed_handler usage.
	* malloc/obstack.c: Likewise.

1998-10-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/dl-machine.h (RTLD_START): Fix clearing startup
	flag.  Switch back to previous section.

1998-10-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-open.c: Declare _dl_unload_cache.
	* elf/rtld.c: Likewise.
	* sysdeps/generic/dl-cache.c (_dl_unload_cache): Cast first
	argument of munmap.

1998-09-28  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libio.h [!__STDC__]: Define const only if not defined.

1998-09-29  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c (yp_all): Close UDP socket und give CLIENT handle free.

1998-09-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/socketbits.h (CMSG_ALIGN): Define.
	(__cmsg_nxthdr): Use CMSG_ALIGN (fixes a bug) and correct test for
	availability of another entry.
	Patch by ak@muc.de.

	* sysdeps/unix/sysv/linux/netinet/ip.h (IPOPT_NOOP): Fix typo.
	Patch by ak@muc.de.

1998-09-11  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/res_init.c (res_init): Handle resolv.conf file with only
	one nameserver correctly.  Patch by HJ Lu.

1998-09-14  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nis/nis-pwd.c (_nss_nis_getpwent_r): Correct test for
	invalid password.

1998-09-10  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/random_r.c (__setstate_r): Allow call with same state
	array as currently used (PR libc/774).
	Patch by rob@retina.anatomy.upenn.edu.

1998-09-10 11:53  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.c (__tzfile_read): Handle case when there are no
	transitions.
	* time/tzset.c (tzset_internal): Set __timezone before returning.

1998-09-10  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/res_init.c (res_init): Initialize _res.nscount and
	_res.nsaddr.sin_port differently for the can when no loopback is
	available to allow immediate timeout in non-networking environments.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-08-31  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Update _dl_loaded if the first
	object on the list is removed.
	Reported by HJ Lu [PR libc/770].

	* io/sys/stat.h (ALLPERMS): Fix type (S_ISTXT -> S_ISVTX).
	Reported by Rob.Hagopian@vu.union.edu [PR libc/763].

	* glibcbug.in: Use mktemp to generate temporary files.

1998-08-31 22:44  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nis/nis-pwd.c (_nss_nis_getpwnam_r): Correct test for
	invalid password.
	(_nss_nis_getpwuid_r): Likewise.
	Patch by Matthew Arnison <matthewa@physics.usyd.edu.au>.

1998-08-31  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* io/lockf.c (lockf): Move initilisation of fl.l_whence and
	fl.l_start at beginning of function.
	Patch by Geoff. Dash <geoffd@zeta.org.au> [PR libc/769].

1998-08-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add umount.S.

1998-08-28 09:22  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (malloc_hook_ini): Don't overwrite realloc and
	memalign hook.
	(realloc_hook_ini): Don't overwrite memalign hook.
	(memalign_hook_ini): Don't overwrite malloc and memalign hooks.
	Reported by Philippe Troin <phil@fifi.org>.

	* malloc/mcheck.c (mprobe): Call checkhdr with adjusted pointer.
	Patch by Philippe Troin <phil@fifi.org>.

1998-08-26 17:48  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Move map->l_nsearchlist value into local
	variable so that map can be freed.
	Reported by Philippe Troin <phil@fifi.org>.

	* elf/dl-open.c (_dl_open): Correct test for extending global
	scope array.
	Patch by Philippe Troin <phil@fifi.org>.

1998-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* libio/vsnprintf.c (_IO_vsnprintf): Set first byte of destination
	array to NUL to handle maxlen==1 case correctly.
	Patch by HJ Lu.

1998-08-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-cache.c: Move static variable cache and cachesize
	to toplevel.
	(_dl_unload_cache): New function.
	* elf/dl-open.c (_dl_open): Unload map file before freeing the lock.
	* elf/rtld.c (dl_main): Unload map file before jumping to user code.

1998-08-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdlib/jrand48_r.c (__jrand48_r): Set also upper half of result.
	Fixes PR libc/757 (Reported by Michael Creutz <creutz@bnl.gov).

1998-08-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/ldd.bash.in: Print "no such file" to stderr.
	Patch by Alexander Kjeldaas <astor@guardian.no> [PR libc/712].

1998-08-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (install-symblolic-link): Fix spelling.

1998-08-20 17:14  H.J. Lu  <hjl@gnu.org>

	* libio/libioP.h (FILEBUF_LITERAL): Set the _offset field to
	_IO_pos_BAD.

1998-02-20 17:54  H.J. Lu  <hjl@gnu.org>

	* libio/fileops.c (_IO_file_seekoff): Don't adjust pointers if
	_IO_SYSSEEK fails.

1998-08-20 19:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile [subdirs=misc] (sysdeps_routines):
	Add umount.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove umount.
	* sysdeps/unix/sysv/linux/umount.S: New file.

1998-08-20 16:01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldd.sh.in: Redirect warnings and error messages to stderr.
	* elf/ldd.bash.in: Likewise.

	* stdio-common/tst-printf.c: Add test case for snprintf.

1998-08-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* shadow/putspent.c: Remove stray CR.

1998-08-18  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/Makefile (link-libc-static): New variable; set
	this here, overriding Makeconfig generic value so we link against
	the RPC libs.

1998-08-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makeconfig (link-libc-static): Define it.

	* elf/Makefile ($(objpfx)sln): Use $(link-libc-static).

1998-08-18  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/rpcsvc/rusers.x: Write ut_line, ut_name, and ut_host as
	byte arrays, not as strings.
	Patch by HJ Lu.

1998-08-17  Ulrich Drepper  <drepper@cygnus.com>

	* pwd/putpwent.c (putpwent): Fix typos.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-08-12 12:09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/socketbits.h: Add more magic to work better
	with kernel headers.  Patch by Matti Aarnio <matti.aarnio@sonera.fi>.

	* elf/elf.h: Define R_68K_NUM, R_386_NUM, R_SPARC_NUM, R_MIPS_NUM,
	and R_ALPHA_NUM.

	* elf/Makefile: Undo last change.

	* po/sv.po: Update for 2.0.7.

	* posix/glob.c: Carry over changes from 2.1 which increase the speed
	and fix some bugs.

1998-08-07  Cristian Gafton  <gafton@redhat.com>

	* pwd/putpwent.c (putpwent): Avoid writting (none) in the passwd file.
	* shadow/putspent.c (putspent): Likewise.

1998-08-10  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_db/db-XXX.c (_nss_db_getXXX): If buffer is too small
	decrement `entidx' to allow retrieving the same entry again.

1998-08-09 09:40  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-XXX.c (internal_getent): In case of an read
	error do not trust errno value, set it to ENOENT.

1998-08-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/rcmd.c (__ivaliduser): Allow '#' as comment character.

1998-08-08 14:01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Take empty LD_PRELOAD string into account.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-08-04 15:24  Ulrich Drepper  <drepper@cygnus.com>

	* po/de.po: Update for 2.0.7.
	* po/es.po: Likewise.
	* po/fr.po: Likewise.
	* po/no.po: New file.
	* po/sk.po: New file.

1998-08-03  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.h: Define GLOB_TILDE_CHECK.

1998-07-27 17:42  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-parse.c (INT_FIELD): Use strtoul instead of
	strtol.
	(INT_FIELD_MAYBE_NULL): Likewise.

1998-07-28  Ulrich Drepper  <drepper@cygnus.com>

	* signal/signal.h: Add prototype for sysv_signal.

1998-08-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/netinet/in.h (IN_CLASSC): Correct mask.
	* sysdeps/unix/sysv/linux/netinet/in.h: Likewise.
	Reported by Ian Staniforth <I.Staniforth@sheffield.ac.uk> [fixes
	PR libc/727].

1998-07-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile: Include Makeconfig early enough.  Add rules for
	%.info and %.dvi.
	(dir-add.texinfo): Renamed from dir-add.texi.

1998-07-24 10:58  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (install-clean-symbolic-link-list): Make phony.
	* Makefile (install-symblolic-link): Make phony.  Depend on
	subdir_install for parallel makes.

	* elf/Makefile: Don't install sln.

1998-07-23  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c: Fix two problems with GLOB_DOOFFS.
	Reported by bwelling@anomaly.munge.com [PR libc/720].

1998-07-22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/Dist: Add sys/elf.h, sys/procfs.h,
	sys/reg.h and sys/user.h.

	* elf/Makefile (distribute): Add sln.c

1998-07-22 12:47  Ulrich Drepper  <drepper@cygnus.com>

	* signal/Makefile (headers): Add sigstack.h.
	* signal.h: Include sigstack.h instead of defining struct sigstack and
	struct sigaltstack here.
	* sysdeps/generic/sigstack.h: New file.
	* sysdeps/unix/sysv/linux/sigstack.h: New file.

	* string/strcoll.c: Correct problem with empty strings.
	* string/strxfrm.c: Likewise.
	Reported by vbzoli@hbrt.hu [PR libc/719].

1998-07-21 10:58  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: More LD_PRELOAD parsing fixes.

	* catgets/open_catalog.c: Catch incorrect string indeces and empty
	input file.

	* time/africa: Update from official tzdata.
	* time/antarctica: Likewise.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/backward: Likewise.
	* time/etcetera: Likewise.
	* time/europe: Likewise.
	* time/factory: Likewise.
	* time/iso3166.tab: Likewise.
	* time/leapseconds: Likewise.
	* time/northamerica: Likewise.
	* time/pacificnew: Likewise.
	* time/southamerica: Likewise.
	* time/tzselect.ksh: Likewise.
	* time/zone.tab: Likewise.

1998-07-21 07:10  H.J. Lu  <hjl@gnu.org>

	* elf/sln.c: New file.

	* elf/Makefile (extra-objs): Add sln.o.
	(install-rootsbin): Add sln.
	($(objpfx)sln): New target.

	* Makerules (symbolic-link-prog, symbolic-link-list): New
	macros.
	(install-clean-symbolic-link-list): New target.
	(install): Depend on install-clean-symbolic-link-list.
	(make-shlib-link): Changed for $(symbolic-link-list).

	* Makefile (install-symblolic-link): New target.
	(install): Depend on install-symblolic-link.

1998-07-20 18:20  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/gethostname.c: Return ENAMETOOLONG if
	buffer is too small.
	Reported by John Levon <j_levon@ncc.co.uk>.

1998-07-20 13:55  Ulrich Drepper  <drepper@cygnus.com>

	* inet/protocols/rwhod.h: Remove definition of _PATH_RWHODIR.
	Include <paths.h> instead.
	* sysdeps/generic/paths.h: Define _PATH_RWHODIR.
	* sysdeps/unix/sysv/linux/paths.h: Likewise.
	Reported by Dale Scheetz <dwarf@polaris.net>.

	* stdlib/stdlib.h: Fix typo.
	Reported by Dale Scheetz <dwarf@polaris.net>.

1998-07-17 13:29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/dl-envvars.h: New file.

1998-07-14  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c [_USE_IN_LIBIO] (encode_error): Free
	cancelation handler.
	(conv_error): Likewise.
	(input_error): Likewise.
	(memory_error): Likewise.

1998-07-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-sysdep.c (unsetenv): Use _environ not __environ.
	* sysdeps/generic/dl-sysdep.c: Define unsetenv.
	* elf/rtld.c (dl_main): Correct tests in preloading interpreting
	lines.  Patch by Christian Gafton.

1998-07-09 14:03  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (distribute): Add dl-envvars.h.
	* elf/rld.c: Remove LD* envvars if not used.
	* sysdeps/generic/dl-envvars.h: New file.
	* sysdeps/unix/sysv/linux/i386/dl-envvars.h: New file.

1998-07-04 10:14  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.c (__tzfile_read): Correct setting of __tzname array
	values.
	(__tzfile_compute): Correct setting of __tzname array values.

1998-07-07 12:00  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/res_comp.c: Prevent warning.

1998-07-06 12:04  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nis/nis-pwd.c (internal_nis_getpwent_r): Handle adjunct
	password scheme.
	(_nss_nis_getpwnam_r): Likewise.
	(_nss_nis_getpwuid_r): Likewise.

1998-07-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/in.h: Use u_int32_t instead of
	uint32_t.

1998-07-06 17:58  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Fix problem with empty LD_PRELOAD value.
	Patch by David Engel.

1998-07-06  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (iruserok): Initialize hostf.
	Reported by  Richard Kilgore <rkilgore@lore.ece.utexas.edu>.

1998-06-24  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-XXX.c (_nss_files_get,ENTNAME_r): Initialize
	position when file was opened here.
	Reported by Howard Chu <hyc@platinum.com>.

1998-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strtod.c (str_to_mpn): Fix extending of n array which
	only should happen for cy != 0.

1998-06-15 14:35  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/svc_tcp.c (readtcp): Also listen to all the other connections
	and process incoming data.
	* sunrpc/xdr_rec.c (set_input_fragment): Only recognize zero length
	fragments as invalid.
	Patches by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1998-06-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (_dl_start): Make static.
	* sysdeps/m68k/Makefile (CFLAGS-rtld.c): Add -Wno-unused.

1998-05025 22:18  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/i386/Makefile (sysdep_headers): Add
	sys/elf.h and sys/reg.h.
	* sysdeps/unix/sysv/linux/i386/sys/elf.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/reg.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/user.h: New file.

	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_GETREGS,
	PTRACE_SETREGS, PTRACE_GETFPREGS, PTRACE_SETFPREGS): Added.

1998-06-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip.h (struct ip_options): Define
	__data member only for gcc.

1998-06-08  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/svc_authux.c (_svcauth_unix): Use unsigned types for
	str_len, gid_len and i.

1998-06-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/fgetpwent_r.c (__fgetpwent_r): Correct buffer overflow fix.
	* grp/fgetgrent_r.c (__fgetgrent_r): Likewise.
	* shadow/fgetspent_r.c (__fgetspent_r): Likewise.
	Noticed by Jake Garver <garver@valkyrie.net>.

1998-06-04  Ulrich Drepper  <drepper@cygnus.com>

	* libio/stdio.h: Protect parameter names in prototypes with __.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* login/login.c (login): Let pututline take care of finding the
	positin to insert the UTMP entry.  This corrects a bug where ssh
	was not reusing UTMP entries marked as DEAD_PROCESS.
	Reported by Herbert Xu <herbert@gondor.apana.org.au>.

1998-06-01  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/rpc/xdr.h (struct XDR): Don't mark xdr_ops element as
	const.

	* sysdeps/i386/fpu/__math.h: Use ((__unused__)) instead of
	((unused)).  Reported by Bruno Haible.

1998-05-29  Ulrich Drepper  <drepper@cygnus.com>

	* locale/loadlocale.c (_nl_load_locale): Don't allow too small
	files crash the program.

1998-05-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/res_send.c: Security fixes from bind 4.9.7-REL.

	* resolv/gethnamaddr.c: Likewise.

	* resolv/res_comp.c: Likewise.

1998-05-22  Ulrich Drepper  <drepper@cygnus.com>

	* libio/strops.c (_IO_str_underflow): Read newly available
	character from buffer as unsigned.

	* catgets/open_catalog.c (__open_catalog): Don't try to close file
	which isn't open to preserve correct error number.

1998-05-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/Makefile (tz-cflags): Define TM_GMTOFF and TM_ZONE.
	(CFLAGS-zdump.c): Add $(tz-cflags).

	* time/zdump.c (abbr): Use TM_ZONE if defined.  Add const to
	return type.

1998-05-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/tzfile.c (__tzfile_compute): Undo last change.  Instead
	take struct tm parameter and set tm_isdst, tm_zone and tm_offset
	if use_localtime.
	* time/tzset.c: Update prototype of __tzfile_compute.
	(__tz_convert): Pass tp to __tzfile_compute.  Don't set tm_isdst,
	tm_zone and tm_offset here if __use_tzfile.

1998-05-15 14:36  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.c (__tzfile_compute): Take new arguments.  Store
	DST information and offset in them.
	* time/tzset.c (__tz_convert): Pass extra parameters to
	__tzfile_compute.  Compute equivalent values for use of tz_rules.
	* time/offset.c: Update from glibc 2.1.
	* time/time.h: Adopt prototype for __offset.

1998-05-14 13:25  Ulrich Drepper  <drepper@cygnus.com>

	* inet/netinet/in.h: Add defines for multicast.
	Reported by Jeremy Hall <jhall@UU.NET>.

1998-05-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makeconfig (rpath-link): Add resolvobjdir.
	(resolvobjdir): New variable.
	Reported by Peter Breitenlohner <peb@mppmu.mpg.de> [fixes PR libc/633].

1998-05-20 09:36  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c: Call shared object terminators at the right time.
	Patch by Philippe Troin <phil@fifi.org>.

1998-05-19 15:58  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Fix typo.  Don't handle
	LD_PROFILE_OUTPUT in SUID binaries.
	* intl/dcgettext.c: In SUID binaries don't let language part of
	locale value contain path elements.
	* intl/explodename.h: Define new function _nl_find_language.
	* intl/loadinfo.h: Declare _nl_find_language.
	* locale/findlocale.c (_nl_find_locale): Use _nl_find_locale to get
	language part it drop the value is path element is contained.

1998-05-19  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/svc_tcp.c: Add FreeBSD DoS patch.
	* sunrpc/xdr_rec.c: Likewise.

1998-04-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* configure.in: Add new option --disable-force-install.  Substitute
	force_install.
	* config.make.in (force-install): Set from configure.
	* Makerules (force-install): New phony target.
	* Makeconfig (+force): New variable.
	* Makefile: Use it in dependency list of installation targets.
	* db/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* po/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/standalone/i386/force_cpu386/Makefile: Likewise.
	* time/Makefile: Likewise.

1998-05-12  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c: Fix for NO_THREADS case.

1998-05-06 12:51  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h (pow): Use long long int for
	test for integer.

	* sysdeps/libm-i387/e_pow.S: Correctly shift double word.
	* sysdeps/libm-i387/e_powl.S: Likewise.

1998-05-03  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c [__linux__] (ptmalloc_unlock_all2): New
	function, used as atfork handler for the child process to work
	around a problem in LinuxThreads.

1998-03-31  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (chunk2mem_check, top_check): New functions.
	(malloc_check, free_check, realloc_check, memalign_check): Use
	them to improve overrun checking.  Overruns of a single byte and
	corruption of the top chunk are now detected much more reliably.

1997-08-12 17:17  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/thread-m.h (thread_atfork, thread_atfork_static): New
	macros to encapsulate pthread_atfork's functionality.
	* malloc/malloc.c (ptmalloc_lock_all, ptmalloc_unlock_all): New
	functions, registered via thread_atfork in the initialization
	routine or via thread_atfork_static in global scope.  This
	ensures a consistent state of all locks across fork().

1998-05-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/rpc/pmap_clnt.h: Carry over change from 2.1 to properly
	typedef resultproc_t.  Reported by Peter Leven. [PR libc/595]

1998-05-02  7:06  Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/lshift.s: Correct .prologue usage.
	* sysdeps/alpha/mul_1.s: Likewise.
	* sysdeps/alpha/rshift.s: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/alpha/sub_n.s: Likewise.
	* sysdeps/alpha/submul_1.s: Likewise.
	* sysdeps/alpha/alphaev5/add_n.s: Likewise.
	* sysdeps/alpha/alphaev5/lshift.s: Likewise.
	* sysdeps/alpha/alphaev5/rshift.s: Likewise.
	* sysdeps/alpha/alphaev5/sub_n.s: Likewise.
	* sysdeps/alpha/elf/crtbegin.S: Likewise.
	* sysdeps/alpha/elf/crtend.S: Likewise.
	* sysdeps/alpha/elf/start.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/clone.S: Likewise.

	* sysdeps/alpha/fpu/e_sqrt.c: Disable custom versions of sqrt.

1998-04-24 13:56  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/socketbits.h: Add #defines for enum values.
	Patch by Thomas Bushnell, n/BSG.

1998-04-23 22:43  Ulrich Drepper  <drepper@cygnus.com>

	* locale/iso-4217.def: Update.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/signum.h: Add SIGCLD definition.

1998-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* inet/ether_aton_r.c (ether_aton_r): Preserve high-nibble value
	in hex conversion.
	* inet/ether_aton.c (ether_aton): Declare result variable static.
	Reported by ahyung@unixg.ubc.ca.

1998-04-14  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/open_catalog.c (__open_catalog): Fix problems with
	reading non-files.  Always close file.

1998-04-09 17:32  Ulrich Drepper  <drepper@cygnus.com>

	* Make-dist: Remove link and .tar file.

1998-03-26 15:20  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* inet/rcmd.c (iruserok): Remain setuid to the local user
	while .rhosts is actually read, to make .rhosts-over-NFS work
	(PR libc/524).  Use iruserfopen() for security checks on both
	hosts.equiv and .rhosts.  General cleanup.
	(iruserfopen): New function, performs careful checking on
	hosts.equiv/.rhosts files.  Disallows all the old forbidden
	stuff plus hard links to files.

1998-04-06 13:54  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig (libtypes): Use object-suffixes-for-libc instead of
	object-suffixes.

1998-03-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules ($(objpfx)stamp.So-$(subdir)): Move inside conditional
	for objects.

	* manual/Makefile (lib): Use object-suffixes-for-libc instead of
	object-suffixes.
	* Makefile (parent-mostlyclean): Likewise.
	* rpm/Makefile (install-lib): Likewise.

1998-04-04 09:52  H.J. Lu  <hjl@gnu.org>

	* Makeconfig (CPPFLAGS-.So): Add -DPIC.

1998-04-04  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locfile.c (locfile_read): Fix typo.

1998-03-30 08:05  H.J. Lu  <hjl@gnu.org>

	* resolv/res_comp.c (underscorechar): New.
	(middlechar): Allow '_'.

1998-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/ioctls.h (SIOCPROTOPRIVATE): Added.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules (install): Change comment for libc.so following the
	libc_nonshared changes.

	* sysdeps/unix/sysv/linux/socketbits.h (MSG_*): Also define as macros.

1998-03-31 08:01  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/syscalls.list (sigpending): Renamed
	to __syscall_sigpending
	(sigprocmask): Renamed to __syscall_sigprocmask.

	* sysdeps/unix/sysv/linux/sigpending.c: New.

	* sysdeps/unix/sysv/linux/sigprocmask.c: New.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules: Remove extra rule for .oS.

1998-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXent_r.c (REENTRANT_GETNAME): Avoid endless loop.

1998-03-30 17:26  H.J. Lu  <hjl@gnu.org>

	* elf/dl-open.c (_dl_open): Fix a typo.
	(_dl_global_scope_alloc): Make it static.

1998-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* csu/Makefile (routines): Add libc-start.
	* sysdeps/generic/libc-stat.c: New file.

1998-03-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	Put the static-only routines in a separate library.
	* Makeconfig (libtype.So, CFLAGS-.So, CPPFLAGS-.So,
	object-suffixes-for-libc): New variables.
	(all-object-suffixes): Add .So.
	(link-libc): Link against libc_nonshared.a instead of libc.a.
	Remove explicit reference to the dynamic linker.
	* Rules: Remove handling of static-only-routines.
	* Makerules: Handle them here instead.  Use
	$(object-suffixes-for-libc) instead of $(object-suffixes) when
	dealing with libc routines.
	($(objpfx)%.So): New rules for static-only routines.
	(elide-routines.So): Elide all routines except static-only routines.
	($(objpfx)stamp.So-$(subdir)): Special rule for when
	static-only-routines is empty.
	($(inst_libdir)/libc.so): Use libc_nonshared.a instead of
	libc.a.  Remove explicit reference to the dynamic linker.

1998-03-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/maint.texi (Reporting Bugs): Change
	bug-glibc-manual@prep.ai.mit.edu to bug-glibc-manual@gnu.org.

1997-10-15 06:56  Ulrich Drepper  <drepper@cygnus.com>

	* glibcbug.in: Fix @gnu.ai.mit.edu -> @gnu.org.
	* catgets/gencat.c: Likewise.
	* db2/makedb.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.

1997-12-22 18:10  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c: __malloc_initialized now signals three states:
	uninitialized, initializing, initialized.  Used in mcheck.
	* malloc/mcheck.c (mcheck): Allow installation when malloc is
	uninitialized or is just initializing.

1998-03-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* version.c: Update copyright.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/hurd/setsockopt.c (setsockopt): Make OPTVAL
	parameter const.  Reported by UCHIYAMA Yasushi <uch@nop.or.jp>.

	* elf/dl-support.c: Add definition of _dl_library_path for static
	binaries.

1998-03-23  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/resolv.h: Include <netinet/in.h>.

1998-03-23 13:45  Ulrich Drepper  <drepper@cygnus.com>

	* manual/nss.texi: The database is not called network but networks.
	Reported by Herbert Xu <herbert@gondor.apana.org.au>.

1998-03-23 07:52  H.J. Lu  <hjl@gnu.org>

	* elf/dl-close.c (_dl_close): Fix byte count while removing the
	shared object from the global scope list and optimize a little
	bit.

1998-03-09 08:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/chown.c: Moved to ...
	* sysdeps/unix/sysv/linux/i386/chown.c: ...here.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add s_chown here.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove s_chown here.

1998-03-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/opendir.c (__opendir): Don't block on FIFOs etc.

1998-03-17  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Correct and simplify unmapping.

1998-03-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/pty.c (openpty): Allow the use of more ptys.

	* catgets/Makefile (CPPFLAGS): Change NLSPATH to also examine
	directory index by only the language.

1998-03-16 10:49  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/__math.h (__ieee754_atan2): Reorder conditions
	to handle x = 0 or y = 0 correctly.

1998-03-14  Ulrich Drepper  <drepper@cygnus.com>

	* string/tester.c (main): Update strsep tests from 2.1.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Remove selection of
	instruction set here.
	* sysdeps/unix/sysv/linux/alpha/Makefile (CFLAGS-ioperm.c): Define
	to set needed instruction set.
	Patches by Richard Henderson.

	* locale/programs/linereader.c (lr_token): Return EOF token at EOF.
	(get_toplvl_escape): Correctly terminate loop at EOF.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-03-13 17:39  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/strsep.c: Correct handling of separators after
	last non-separator.

1998-03-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h (atan2): Take over code from glibc
	2.1.

1998-03-12 14:24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dlerror.c (last_object_name): Removed.
	(dlerror): Don't use last_object_name.
	(_dl_error_run): Omit second argument to _dl_catch_error.
	* elf/dl-error.c (struct catch): Remove objname member.
	(_dl_signal_error): Construct string including objname when given.
	(_dl_catch_error): Remove objname handling.
	* elf/link.h (_dl_catch_error): Fix prototype and comment.
	* elf/rtld.c (dl_main): Call _dl_catch_error correctly.
	* elf/dl-deps.c (_dl_map_objet_deps): Likewise.
	* nss/nsswitch.c (nss_dlerror_run): Likewise.
	[Corrects PR libc/501].

1998-03-12  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (dl_main): Install link maps for preloaded objects
	using main_map as loader.

1998-02-23 12:33  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/__longjmp.S: Fix race condition.
	Reported by Bruno Haible <haible@ilog.fr>.

1998-03-12  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_db/db-XXX.c (lookup): Copy data to safe place before
	parsing it.

	* elf/dl-close.c (_dl_close): Applied changes from 2.1 to correct
	unmapping.

1998-03-10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (_dl_library_path): New variable.  Initialize from
	LD_LIBRARY_PATH envvar and let user overwrite the value using new
	--library-path option.

	* elf/dl-load.c (_dl_map_object): Use LD_LIBRARY_PATH envvar if
	global variable _dl_library_path is not set.

	* Makeconfig: Use --library-path option instead of LD_LIBRARY_PATH
	envvar.

	* misc/syslog.c (vsyslog): Don't try to send if not connected to
	syslog daemon.
	(closelog_internal): Don't do anything if not connected.

	* libio/iovdprintf.c (_IO_vdprintf): Set _IO_DELETE_DONT_CLOSE
	flag.

1998-03-10 19:43  Matthias Urlichs <urlichs@noris.de>

	* sysdeps/unix/readdir_r.c: Zero out *result on EOF.
	* manual/filesys/texi: Document this.

1998-03-10  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/posix/mkstemp.c (mkstemp): Open temporary file mode
	0600.  Reported by Greg Alexander <galexand@sietch.bloomington.in.us>.

1998-03-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/getresgid.c: Remove stub-tag.h.
	* sysdeps/generic/getresuid.c: Likewise.

1998-03-09 15:42  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/getresgid.c: New file.
	* sysdeps/generic/getresuid.c: New file.

1998-03-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/getresgid.c: Fix typo.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-03-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add
	getres[ug]id.
	* sysdeps/unix/sysv/linux/getresgid.c,
	sysdeps/unix/sysv/linux/getresuid.c: New files.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add getres[ug]id.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove getres[ug]id, add
	s_getres[gu]id.  Don't mark lchown as extra syscall.

	* sysdeps/unix/sysv/linux/sparc/socket.S: Allow __socket to be
	redefined.

1998-03-05  Ulrich Drepper  <drepper@cygnus.com>

	* misc/syslog.c (openlog_internal): Follow 2.1 changes to prevent
	errno being set.

1998-03-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/chown.c: New file for compatibility of
	Linux 2.0 and 2.1.

	* sysdeps/unix/sysv/linux/syscalls.list: Add chown.

1998-03-04 12:43  Ulrich Drepper  <drepper@cygnus.com>

	* manual/texinfo.tex: Updated.

1998-03-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/maint.texi: Change prep.ai.mit.edu to {ftp}.gnu.org.

1998-02-24 08:10  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/alpha/sysdep.S (_errno): Add in addition to __errno.

1998-02-24 09:40  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldd.sh.in: Add compatibility for broken old shells.
	* elf/ldd.bash.in: Likewise.

1998-03-04  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/rpc/auth.h: More prototype cleanups.
	* sunrpc/rpc/xdr.h: Likewise.

1998-02-15  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nsswitch.c (__nss_lookup): Return 1 if this was the last
	module.

	* nss/getXXent_r.c: If no more module is found don't try to call
	setXXent functions but leave unsuccessfully.

1998-02-13  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/stdlib.h (struct drand48_data): Leave X to user macros
	and use x for member name.
	Reported by Daniel Lyddy <daniell@cs.berkeley.edu>.

	* stdlib/drand48.c: Change according to member name change.
	* stdlib/drand48_r.c: Likewise.
	* stdlib/lcong48_r.c: Likewise.
	* stdlib/lrand48.c: Likewise.
	* stdlib/lrand48_r.c: Likewise.
	* stdlib/mrand48.c: Likewise.
	* stdlib/mrand48_r.c: Likewise.
	* stdlib/seed48.c: Likewise.
	* stdlib/seed48_r.c: Likewise.
	* stdlib/srand48_r.c: Likewise.

1998-02-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Don't mark lchown as
	extra syscall.

1998-03-03 23:08  H.J. Lu  <hjl@gnu.org>

	* misc/efgcvt_r.c: Really update from 2.1.

1998-02-07 15:06  H.J. Lu  <hjl@gnu.org>

	* libio/strops.c (_IO_str_seekoff): Handle MODE == 0.

1998-03-03  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.7.

	* elf/dl-load.c (_dl_map_object): Take extra argument and pass it
	to open_path.
	(open_path): If preloading and SUID binary, use shared object only
	if SUID bit is set.
	* elf/link.h: Adjust prototype for _dl_map_object.
	* elf/dl-deps.c (_dl_map_object_deps): Call _dl_map_object with
	new argument.
	* elf/dl-open.c (_dl_open): Likewise.
	* elf/rtld.c: Likewise.

	* Makefile (subdirs): Undo last patch.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add osf_sigaction
	for some broken kernel versions.
	* sysdeps/unix/sysv/linux/alpha/ioperm.c (_ioperm): Remove extra
	closing paren.
	* sysdeps/alpha/dl-machine.h: Add missing opening brace.
	Patches by Cristian Gafton.

	* misc/efgcvt_r.c: Carry over patches from 2.1 to correct several
	bugs.

	* nis/rpcsvc/ypclnt.h: Add prototypes to prevent warnings.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.

	* sunrpc/rpc/clnt.h: Add const to prototypes for clnt_perror.
	* sunrpc/clnt_perror.c: Adopt definition.

1998-02-06 07:48  H.J. Lu  <hjl@gnu.org>

	* db/Makefile ($(inst_libdir)/libndbm.a,
	$(inst_libdir)/libndbm.so): New targets.

1998-03-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h: Don't use _Mldbl
	* math/math.h: Likewise.

1998-03-02 18:23  H.J. Lu  <hjl@gnu.org>

	* stdio-common/vfscanf.c (inchar): Fix typos.

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Fix msgfmt test.  Fix handling of //s in sysdeps
	search.

1998-02-17 17:41  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/s_modfl.c: Handle numbers > 1.0 correctly.

1998-02-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/netinet/in.h: Rename second parameter of bindresvport to
	avoid buggy gcc warning. [PR libc/412]

1998-02-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* dladdr.c (dladdr): Remove duplicate code.

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (subdirs): Remove login.  It appears in
	sysdeps/unix/Subdirs.  Reported by Roland McGrath.

	* configure.in: Fix script for handling $CC containing whitespace.
	Patch by Roland McGrath.

	* configure.in: Avoid //s in sysdirs.  Patch by Roland McGrath.

1998-03-02 07:17  H.J. Lu  <hjl@gnu.org>

	* elf/dl-open.c (_dl_open): Update _dl_global_scope_end when
	setting _dl_global_scope for RTLD_GLOBAL.

1998-02-05 20:41  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* elf/dl-addr.c: Fix search algorithms in dladdr(); don't assume
	that the number of program headers is >0 (which is wrong for the
	loader itself).

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* posix/execl.c: POSIX.1 says that argv[0] *should* be provided,
	but does not require it.  Handle missing argv[] values gracefully.
	* posix/execle.c: Likewise.

1998-02-26  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c: Fix problem with EOF while waiting for
	input.

1998-02-18 23:31  Richard Henderson  <rth@cygnus.com>

	* stdlib/strtod.c (STRTOF): Don't call lshift with zero count.
	* tst-strtod.c (tests): Add fail case for above.

	* sysdeps/alpha/dl-machine.h (elf_machine_rela): Simplify
	bootstrapping.  Produce saner error messages.

	* sysdeps/unix/sysv/linux/Makefile [time] (sysdep_routines): Add
	adjtimex.
	* sysdeps/unix/sysv/linux/syscalls.list (adjtimex): Remove used-by
	asjtime.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Force usage of
	syscalls that use 32-bit struct timeval.
	* sysdeps/unix/sysv/linux/configure.in (LIBC_LINUX_VERSION):
	Update to 2.1.87 for the benefit of Alpha.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Add support for
	RAWHIDE and TSUNAMI.  Patch from Jay.Estabrook@digital.com.

1998-02-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Give clnt handle after error checking free, change
	return codes to fix problems with rpc.nisd in YP mode on Ultra's.

1998-02-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/statfsbuf.h: Include <gnu/types.h> for
	__fsid_t.  Reported by Gene McCulley <mcculley@iag.net>.

1998-02-19  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/gethnamaddr.c (addrsort): Make this function extern.

1998-02-18 16:34  H.J. Lu  <hjl@gnu.org>

	* elf/dlsym.c (dlsym:doit): Fix scope and skip maps for
	_dl_lookup_symbol_skip call.

1998-02-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* wctype/test_wctype.c (TEST): Fix paren nesting.

1998-02-17 16:11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/selectbits.h: Compare result with 0 to get an
	int value.

1998-02-17 11:37  Ulrich Drepper  <drepper@cygnus.com>

	* eld/dl-open.c (_dl_open): Assign correct value to new->l_global.
	Patch forwarded by Cristian Gafton <gafton@redhat.com>.

	* math/math.h: Define M_* constants always as `double' and add new
	macros M_*l which are of type `long double'.

1998-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/ioperm.c (_ioperm): Map all ports
	starting from 0 not only from `from'.
	Patch by Maciej W. Rozycki <macro@ds2.pg.gda.pl>.

1998-02-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/programs/ld-messages.c (messages_finish): Don't skip
	error checking when being quiet.
	* locale/programs/ld-ctype.c (ctype_finish): Likewise.
	(set_class_defaults): Likewise.
	* locale/programs/charmap.c (parse_charmap): Likewise.
	* locale/programs/ld-collate.c (collate_finish): Likewise.
	* locale/programs/ld-monetary.c (monetary_finish): Likewise.
	* locale/programs/ld-time.c (time_finish): Likewise.
	* locale/programs/locfile.c (write_locale_data): Likewise.

	* locale/programs/ld-ctype.c (ctype_class_to): Silently ignore
	unknown characters and empty ranges.
	* locale/programs/ld-collate.c (collate_order_elem): When
	processing an ellipsis properly form a linked list in the result
	table, fix typo when allocating ordering array.
	[PR libc/419]

1998-02-15  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c (yp_all): Remove error message, user should print it.

1998-02-09  H.J. Lu  <hjl@gnu.org>

	* resolv/gethnamaddr.c (getanswer): Fix the PTR/CNAME bug. From
	bind 4.9.6.
	* resolv/nss_dns/dns-host.c (getanswer_r): Ditto.
	[PR libc/389 and 431]

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-support.c (_dl_sysdep_fatal): Fix parameters.

1998-02-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/mach/_strerror.c (_strerror_internal): Use memcpy
	instead of __mempcpy.  Reported by OKUJI Yoshinori
	<okuji@kmc.kyoto-u.ac.jp>. [PR libc/446].

1998-02-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Check for working msgfmt version (from GNU gettext
	0.10 or later).

1997-11-28 11:21  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Check for a working makeinfo (3.11 or better).
	* config.make.in: Add MAKEINFO to be substituted.
	* manual/Makefile: Don't update info if makeinfo is too old.

1997-10-25 06:51  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dladdr.c: Use braces for correct logical grouping.
	Patch by Wolfram Gloger <wmglo@dent.med.uni-muenchen.de>.

1998-02-02 01:12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add lchown.

1998-01-30 16:06  Philip Blundell  <pb@nexus.co.uk>

	* manual/Makefile: Don't try to install the info files if makeinfo
	is not available.

1998-01-26  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Revert last change;
	kernel 2.1.82 has this fixed.

1998-02-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nis/nss_nis/nis-alias.c (_nss_nis_getaliasbyname_r): Convert
	name to lowercase.

	* nis/nss_nis/nis-network.c (_nss_nis_getnetbyname_r): Convert
	name to lowercase, add test for big enough buffer.

1998-01-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/s_modfl.c (modf): Correct calculation.
	Patch by Markus Schoder <Markus.Schoder@dresdner-bank.de>.

1998-02-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/errno.texi (Error Messages): Correct description of
	strerror_r.  Pointed out by jonas@bagge.se.

1998-02-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* db/makedb.c (main): Add output_name to error message.

	* sunrpc/rpc/xdr.h: Include <sys/types.h> and <rpc/types.h>.
	Patch by Thorsten Kukuk.

	* nis/nss_nis/nis-hosts.c (_nss_nis_gethostbyname2_r): Correct
	last patch.  Patch by Thorsten Kukuk.

	* nss/getXXent_r.c: Include <errno.h>

	* nss/getXXbyYY_r.c: Include <errno.h>.

1997-12-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/C-ctype.c (_nl_C_LC_CTYPE_class32): Undo last change.
	* locale/programs/ld-ctype.c (CHAR_CLASS32_TRANS): Likewise.
	* wctype/wctype.c: Likewise.
	* wctype/wctype.h (_ISwxxx): Renamed from _ISxxx, all uses
	changed.  They are incompatible with the _ISxxx values from
	<ctype.h> on little endian machines.
	(_ISwbit) [__BYTE_ORDER == __LITTLE_ENDIAN]: Correctly transform
	bit number.  This fixes the real bug and restores the integrity of
	the LC_CTYPE locale file.
	* wctype/wcfuncs.c: Change all _ISxxx to _ISwxxx.
	* wctype/wcfuncs_l.c: Likewise.
	* wctype/wcextra.c: Likewise.
	* wctype/wctype_l.c [__BYTE_ORDER == __LITTLE_ENDIAN]: Use correct
	byte swapping.
	[PR libc/405]

1998-02-15 17:16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Define PF_KEY and
	pseudo_AF_KEY instead of pseudo_PF_KEY and AF_KEY.
	Reported by Craig Metz <cmetz@inner.net>.

	* Makerules ($(inst_libdir)/libc.so): Use absolute names for objects.

	* signal/signal.h: Always define sigset_t if __need_sigset_h is
	defined.

1998-02-15 16:55  Ulrich Drepper  <drepper@cygnus.com>

	* socket/sys/socket.h (setsockopt): Make OPTVAL parameter const.
	Patch by Dean Gaudet <dgaudet@arctic.org>.

1998-02-13 17:16  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nis/nis-host.c (_nss_nis_gethostbyname2_r): Fix problem
	with hidden variable name.
	Patch by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1998-02-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/getXXent_r.c: Include <errno.h>

	* nss/getXXbyYY_r.c: Include <errno.h>.

1998-02-02 00:17  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXbyYY_r.c: Correct handling of TRYAGAIN error when buffer
	is too small.
	* nss/getXXent_r.c: Likewise.

1998-02-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add netrose/rose.h.

1998-02-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rtld.c (dl_main): Allow ":" as separator for LD_PRELOAD. Patch
	by Rudolf Leitgeb <leitgeb@leland.stanford.edu>.
	[PR libc/441]

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Use first
	occurence in cache. Reported by Rudolf Leitgeb
	<leitgeb@leland.stanford.edu>.
	[PR libc/440]

	* nss/nss_files/files-service.c: Undo last change.

1998-01-31 11:18  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt_r.c (fcvt_r): Handle illegal NDIGIT correctly.
	[PR libc/410]

1998-01-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/vfprintf.c (process_arg): Fix printing of octal
	zero in alternate form with precision of zero, which must produce
	"0".  Add braces to avoid ambiguous `else'.

1998-01-19 15:08  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/charset.c (insert_char): Correctly insert value
	of eliipsis expression.

1997-11-04 03:08  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strfmon.c: Fix numerous bugs in formatting.

1998-01-30 23:55  Ulrich Drepper  <drepper@cygnus.com>

	* string/strsignal.c: Regard signal number NSIG as illegal.
	* sysdeps/unix/sysv/linux/siglist.c: Define array with only NSIG
	members.

1998-01-30 22:12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile [$(subdir)==nis]: Define
	CFLAGS-ypclnt.c to -DUSE_BINDINGDIR=1.

1998-01-30  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Try at first to use the binding file from ypbind
	before using RPC.

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Heap Consistency Checking): mcheck is
	declared in <mcheck.h>.
	Suggested by Jochen Voss <voss@mathematik.uni-kl.de> [PR libc/438]

	* malloc/Makefile (headers): Add mcheck.h.
	(distribute): Remove mcheck.h.

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/memmem.c (memmem): An empty needle is at the
	beginning of haystack.

1998-01-30  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nis/nis-hosts.c: Convert hostname to lowercase for NIS query.

1998-01-30 19:58  Ulrich Drepper  <drepper@cygnus.com>

	* login/utmp_file.c (pututline_file): Don't always report success
	if similar entry is found.  Patch by Mark M. Kettenis.

1998-01-30 12:05  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/bits/ioctls.h: Include a copy of the
	kernel's network ioctls, rather than using <linux/sockios.h> to
	get them.  This way we are sure of maintaining compatibility if
	the kernel interface should change.

1998-01-30 15:52  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add netrose/rose.h.

1998-01-25 19:54  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/netrose/rose.h: New file.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Install it.

1998-01-30 15:52  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add netrose/rose.h.

1998-01-29 02:38  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-open.c (_dl_open): Make sure the variable `reloc' is
	really kept as a variable.  Patch by Richard Henderson,
	reported by Jakub Jelinek <jj@sunsite.ms.mff.cuni.cz>.

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* assert/assert.h (assert_perror): Correct test for errnum.  Patch
	by uch@nop.or.jp. [PR libc/437]

1998-01-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/socketbits.h: Define _LINUX_TYPES_H to
	prevent use of kernel headers.
	Patch by Richard Henderson.

1998-01-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/fgetpwent_r.c (__fgetpwent_r): Correctly handle buffer
	overflow while reading line with fgets.
	* grp/fgetgrent_r.c (__fgetgrent_r): Likewise.

1998-01-27 00:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/gnu/types.h (__ipc_pid_t): Change to
	unsigned short, not short.
	Reported by Andreas Jaeger.

1998-01-26 00:57  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_compat/compat-grp.c: Correctly handle buffer overflow while
	reading line with fgets.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nss/nss_files/files-XXX.c: Likewise.
	* nss/nss_files/files-alias.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.

1998-01-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/zic.c (dolink): Use symlink if hard link failed with EXDEV.
	Patch by Ulrich Drepper. [PR libc/413]

1998-01-24 15:13  Ulrich Drepper  <drepper@happy.cygnus.com>

	* nss/db-Makefile: Handle empty and comment lines better.
	($(VAR_DB)/services.db): Generate entries with missing protocol
	value.

1998-01-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nsswitch.c (__nss_configure_lookup): Correct test for early
	exit of loop.

1998-01-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-service.c (getservbyport): Allow proto == NULL.
	(getservbyname): Allow proto == NULL.
	Pointed out by David N. Welton <davidw@ecglaf.cks.com>.
	[PR libc/430].

	* string/strerror_r.c (__strerror_r): Fix description of
	function.
	* sysdeps/mach/_strerror.c (_strerror_internal): Fix handling of
	unknown error in presense of small buffer.
	* sysdeps/generic/_strerror.c: Likewise.
	Pointed out by Jonas Bagge <jonas@bagge.se>.

1998-01-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_files/files-parse.c (LOOKUP_NAME_CASE): Use __strcasecmp
	instead of strcasecmp.
	* nss/nss_files/files-alias.c (get_next_alias): Likewise.

1998-01-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* locale/langinfo.h: Add defines.
	* dirent/dirent.h: Add defines for DT_*.

	* sysdeps/generic/confname.h: Add defines for _CS_PATH and
	_PC_VDISABLE.
	Suggested by Roland McGrath.

1997-09-04 13:19  Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/w_sqrt.S: Removed.
	* sysdeps/alpha/fpu/e_sqrt.c: New.  Obey -mieee and -mieee-with-inexact
	and build a version that is as fast as possible given the constraint.
	[PR libc/423].

1998-01-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/gethostid.c (gethostid): Correct
	handling of enlarging buffers (clear errno).
	* sunrpc/clnt_simp.c (callrpc): Likewise.
	* sunrpc/getrpcport.c (getrpcport): Likewise.
	* sunrpc/clnt_gen.c (clnt_create): Likewise.
	* shadow/fgetspent.c (fgetspent): Likewise.
	* shadow/sgetspent.c (sgetspent): Likewise.
	* pwd/fgetpwent.c (fgetpwent): Likewise.
	* nss/getXXent.c (GETFUNC_NAME): Likewise.
	* nss/getXXbyYY.c (FUNCTION_NAME): Likewise.
	* inet/rexec.c (rexec): Likewise.
	* inet/rcmd.c (rcmd): Likewise.
	(ruserok): Likewise.
	(__icheckhost): Likewise.
	* grp/initgroups.c (initgroups): Likewise
	* grp/fgetgrent.c (fgetgrent): Likewise.
	Based on patches by Cristian Gafton <gafton@redhat.com>.

1998-01-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/getXXbyYY_r.c: Fix NSS_STATUS_TRYAGAIN handling.
	* nss/getXXent_r.c: Likewise.
	Patches by Cristian Gafton <gafton@redhat.com>.

1998-01-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_db/db-alias.c (_nss_db_getaliasent_r): Don't include
	terminating null in key size.

1998-01-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/mbyte.texi (Wide String Conversion): Fix declaration of
	wcstombs.  Pointed out by Jochen Voss <voss@mathematik.uni-kl.de>.
	[PR libc/417].

	* sysdeps/i386/fpu/__math.h: Change sgn to __sgn.  Suggested
	by Jochen Voss <voss@mathematik.uni-kl.de>.
	[PR libc/415].

	* manual/time.texi (Priority): Correct description of
	PRIO_MAX.  Pointed out by Jochen Voss <voss@mathematik.uni-kl.de>.
	[PR libc/416].

	* sysdeps/i386/fpu/__math.h: Correct test for buggy gccs.

1998-01-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/alpha/Dist: Add net/route.h.

1998-01-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_files/files-service.c: Fix allocation size to include
	length of PROTO.

	* nss/nss_db/db-XXX.c (lookup): Always set errno and h_errno if
	applicable.  Fix return value and error checking.
	(CONCAT(_nss_db_get,ENTNAME_r)): Loop around to skip over
	unparsable lines.
	(DB_LOOKUP): Allocate space for terminating null byte.
	[PR libc/404]

	* nss/db-Makefile ($(VAR_DB)/passwd.db): Don't handle duplicate
	uids specially.

	* db2/makedb.c (process_input): Continue processing if a duplicate
	key is encountered.

1998-01-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-alias.c (get_next_alias): Do mail alias
	lookups ignoring case.
	* nss/nss_files/files-network.c: Do network lookups ignoring
	case.
	* nss/nss_files/files-hosts.c: Do hostname lookups ignoring
	case.
	* nss/nss_files/files-parse.c (LOOKUP_NAME_CASE): New macro for
	case insensitive comparing.
	Patches by Cristian Gafton <gafton@redhat.com>.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Update from glibc
	2.1 for newer kernels (osf_sigaction).  Suggested by Cristian Gafton
	<gafton@redhat.com>.

1998-01-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/net/if.h: Add IFF_*defines.  Suggested
	by Roland McGrath. [PR libc/395]

1998-01-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (Parsing of Integers): Correct description of
	strtoul.  Pointed out by Scott Snyder <snyder@fnald0.fnal.gov>.
	[PR libc/396]

1998-01-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* signals.c (sigwait): Correct loop initilization and end
	test. Patch by Khimenko Victor <khim@sch57.msk.ru>.

1998-01-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Define the
	cancelable socket functions as __libc_xxx with __xxx as weak
	alias.

	* sysdeps/unix/sysv/linux/m68k/socket.S: Allow __socket to be
	redefined.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.

	* sysdeps/unix/sysv/linux/accept.S: Make __libc_xxx the main name
	and __xxx a weak alias.
	* sysdeps/unix/sysv/linux/connect.S: Likewise.
	* sysdeps/unix/sysv/linux/recv.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/send.S: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.
	[PR libc/391]

1998-01-03 20:47  Mark Kettenis  <kettenis@phys.uva.nl>

	* configure.in: Fix --enable-add-ons code.

1998-01-01 13:52  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (dl_main): Correct parsing of ld.so.preload file.
	Patch by David Engel <david@sw.ods.com>.

	* configure.in: Fix another typo in --enable-add-ons code.

1997-12-30 14:14  Matthias Urlichs  <urlichs@noris.de>

	* misc/lsearch.c (lsearch): Return a pointer to the new element
	if one was "allocated".

1997-12-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/strsignal.c: Don't zap the last character of the "Unknown
	signal" message.

1997-11-20 18:02  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/iofgets.c (_IO_fgets): Return an error only if there
	is a new error.
	* libio/iogets.c (_IO_gets): Ditto.

1998-01-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-network.c: Correct order of parameters for
	getnetbyaddr.
	(LINE_PARSER): Set n_addrtype to AF_INET.

1998-01-25 19:24   Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/dl-machine.h (elf_machine_rela): Let GLOB_DAT
	and JMP_SLOT see the relocation addend.

1997-12-28 19:22  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (RELEASE): Set to "production".

	* po/nl.po: Updated.
	* po/es.po: Updated.

	* sysdeps/posix/mk-stdiolim.c: Correctly handle inclusion by stdio.h.

1997-12-28 17:13  Ulrich Drepper  <drepper@cygnus.com>

	* nis/ypclnt.c (__yp_bind): Make sure socket is closed.
	Patch by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1997-12-24 22:04  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Fix typo.  Correct check for available add-ons.

	* limits.h: Always define MB_LEN_MAX.

	* nis/nss_nis/nis-ethers.c: Correct handling of overflow.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-pwd.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.
	* nis/nss_nis/nis-spwd.c: Likewise.

	* sysdeps/posix/mk-stdiolim.c: Define FOPEN_MAX also when included
	directly.

	* sysdeps/unix/sysv/linux/sys/msq_buf.h: Fix typo.

	* sysdeps/unix/sysv/linux/alpha/net/route.h: New file.

1997-12-20 13:50  Richard Henderson  <rth@cygnus.com>

	* posix/sched.h: timespec is in <time.h>.

	* sysdeps/unix/sysv/linux/sys/kd.h: Don't redefine _LINUX_TYPES_H.

1997-12-21 22:09  Ulrich Drepper  <drepper@cygnus.com>

	* xopen_lim.h: Include stdio_lim.h to get definition of FOPEN_MAX.
	Define STREAM_MAX using FOPEN_MAX.

	* locale/programs/ld-ctype.c (map_collection_max, map_collection_act):
	Define as size_t.
	* locale/programs/locale.c: Use correct cast from pointer value.

	* misc/regexp.h (compile): Use parameter names without __.

	* nis/nss_nis/nis-ethers.c (internal_nis_getetherent_r): Use strncpy
	instead of strcpy for security reasons.
	* nis/nss_nis/nis-proto.c (internal_nis_getprotoent_r): Likewise.
	* nis/nss_nis/nis-rpc.c (internal_nis_getrpcent_r): Likewise.
	* nis/nss_nis/nis-service.c (internal_nis_getservent_r): Likewise.
	* sunrpc/clnt_simp.c (callrpc): Likewise.

	* nis/nss_nis/nis-hosts.c (LINE_PARSER): Use pointer of correct type
	for map_v4v6_hostent call.

	* sysdeps/posix/mk-stdio-lim.c: Generate file which recognizes
	__need_FOPEN_MAX.
	* sysdeps/standalone/stdio_lim.h: Rewrite to recognize
	__need_FOPEN_MAX.
	* sysdeps/stub/stdio_lim.h: Likewise.

	* sysdeps/unix/sysv/linux/alpha/gnu/types.h: Define __ipc_pid_t type.
	* sysdeps/unix/sysv/linux/gnu/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/msq_buf.h: Use __ipc_pid_t for
	msg_lspid and msg_lrpid field.
	* sysdeps/unix/sysv/linux/sys/shm_buf.h: Likewise for shm_cpid and
	shm_lpid field.

1997-12-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in (libc_cv_gcc_alpha_ng_prefix): Correct quoting.

1997-12-13  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* libc-work/nis/ypclnt.c (do_ypcall): Don't free dom_binding twice.

1997-12-11 18:19  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Don't count in multiply reference object in number
	of preloaded objects.  [PR libc/375].

	* sysdeps/generic/gnu/types.h (__FDMASK): Cast constant 1 to be
	shifted correctly.
	* sysdeps/unix/sysv/linux/alpha/gnu/types.h: Likewise.
	* sysdeps/unix/sysv/linux/gnu/types.h: Likewise.
	Reported by Richard Henderson.

1997-12-11 12:08  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: Reset the blacklist correct, fix
	return code for non existent +name entries.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.

1997-12-11 17:40  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c: Update from glibc 2.1.
	* posix/glob.h: Likewise.

1997-11-10 07:40  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* stdlib/exit.c (exit): Handle recursive calls to exit ().

1997-12-11 07:36  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/alpha/bsd-setjmp.S: Add empty file.
	* sysdeps/alpha/bsd-_setjmp.S: Likewise.

1997-12-04 00:06  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: If --enable-add-ons is given without an
	argument, set the addons list to all subdirs with a configure
	script.

1997-05-23 15:26  Philip Blundell  <pjb27@cam.ac.uk>

	* resolv/res_query.c (res_querydomain): Avoid potential buffer
	overrun.  Reported by Dan A. Dickey <ddickey@transition.com>.

1997-11-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* glibcbug.in: Add more information of build environment and flags.

1997-12-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/inet_neta.c (inet_neta): Change type of first parameter
	to u_int32_t. Suggested by John Lavagnino
	<John_Lavagnino@Brown.edu> [PR libc/366].

	* resolv/inet_addr.c (inet_addr): Change return type to u_int32_t.

	* inet/arpa/inet.h: Change types of inet_neta and inet_addr.

1997-12-10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/alpha/Dist: Remove setjmp_aux.c.

1997-12-10 00:38  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules (compile.S, COMPILE.S, COMPILE.s): Use $(ASFLAGS-*)
	variable as well.

	* locale/C-ctype.c: Correct data for isw* functions.
	* locale/programs/ld-ctype.c: Write 32bit char classes in correct
	byte order.
	* wctype/test_wctype.c: Add test for isw* functions.
	* wctype/wctype.c: Return value with expected byte order.

	* sysdeps/alpha/__math.h: Remove cabs definition.
	* sysdeps/libm-ieee754/w_cabs.c [NO_LONG_DOUBLE]: Correct cabsl.

	* sysdeps/posix/sysv_signal.c: Define sysv_signal as weak alias.

	* sysdeps/unix/inet/syscalls.list: Define socket syscalls with
	__libc_* names.

	* sysdeps/unix/sysv/linux/Dist: Add scsi/sg.h, net/if_packet.h,
	net/if_slip.h, and sys/prctl.h.  Remove sys/module.h.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=misc] (sysdep_headers):
	Remove sys/module.h.  Add sys/prctl.h and scsi/sg.h.
	[$(subdir)=inet] (sysdep_headers): Add net/if_slip.h, net/if_packet.h.

	* sysdeps/unix/sysv/linux/syscalls.list: Add prctl.

	* sysdeps/unix/sysv/linux/sys/module.h: Removed.

1997-11-14 03:06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/accept.S: Add __libc_accept as alias.
	* sysdeps/unix/sysv/linux/send.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/recv.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Likewise.

1997-12-07 15:49  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: If buffer is to small, set the file
	handle for /etc/group back in some more cases.
	* nis/nss_compat/compat-pwd.c: If buffer is to small, set the file
	handle for /etc/passwd back in some more cases.
	* nis/nss_compat/compat-spwd.c: If buffer is to small, set the file
	handle for /etc/shadow back in some more cases.

1997-12-06 17:00  H.J. Lu  <hjl@gnu.org>

	* sysdeps/posix/sigblock.c (__sigblock): Don't check int mask
	beyound its size.
	* sysdeps/posix/sigsetmask.c (__sigsetmask): Ditto.
	* sysdeps/posix/sigvec.c (convert_mask, __sigvec): Ditto.

1997-11-30 21:57  Richard Henderson  <rth@cygnus.com>

	Alpha changes for EGCS:
	* config.h.in (ASM_ALPHA_NG_SYMBOL_PREFIX): New entry.
	* configure.in (libc_cv_gcc_alpha_ng_prefix): New check.
	* sysdeps/alpha/dl-machine.h (_dl_runtime_resolve): Care for prefix.
	(_start): Likewise.
	* sysdeps/unix/sysv/linux/alpha/init-first.h: Likewise.

	* sysdeps/alpha/Makefile: Backport setjmp/longjmp rewrite.
	* sysdeps/alpha/__longjmp.S: Likewise.
	* sysdeps/alpha/bsd-_setjmp.S: Likewise.
	* sysdeps/alpha/bsd-setjmp.S: Likewise.
	* sysdeps/alpha/jmp_buf.h: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/alpha/__longjmp.c: Removed.
	* sysdeps/alpha/setjmp_aux.c: Removed.

1997-12-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/socketbits.h: Add AF_* and PF_
	constants from Linux headers.  Pointed out by
	csmall@scooter.o.i.net. [PR libc/369]

1997-12-03 20:40  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* grp/initgroups.c: Increase buffer if it is too small.

1997-12-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/mman.h (MAP_FAILED): Add
	constant. Suggested by Petter Reinholdtsen <pere@sleeper.link.no>
	[PR libc/367].

1997-11-30 06:01  Ulrich Drepper  <drepper@cygnus.com>

	* posix/sys/wait.h (__WAIT_INT): Don't use complex version with
	__typeof for C++ since this fails for class members.
	Reported by Neal Becker <neal@ctd.comsat.com>.

1997-11-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/module.h: Remove file. It's
	incompatible with Linux 2.1.x. Packages using modules
	(e.g. modutils) should/do provide their own version. Suggested by
	Richard Henderson.

	* sysdeps/unix/sysv/linux/Dist: Remove sys/module.h

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers)
	[$(subdir)=socket]: Remove sys/module.h.

1997-11-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/clnt_udp.c (clntudp_call): Rename cu_wait from timeout to
	not shadow the variable in the outer scope. Carry over from glibc 2.1.

1997-11-21 21:33  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/w_cabs.c: Add __cabs_complexl definition.

1997-11-20 16:51  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (malloc_update_mallinfo): Initialize struct for
	return value.

1997-11-19 23:50  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Update from 2.1 version.
	* glibcbug.in: Likewise.
	* manual/maint.texi: Likewise.

	* math/mathcalls.c: Remove declaration of infnan and cabs.

	* libio/stdio.h: Don't use _POSIX_SOURCE in header.

	* manual/errno.texi: Define new Linux errors.

	* math/math_private.h: Correct result type of __ieee754_rem_pio2{,f,l}
	and __kernel_rem_pio2{,f,l}.

	* posix/glob.h: Define GLOB_ABORTED and GLOB_ABEND only if __USE_GNU.

	* stdio-common/printf_fp.c: Define NDEBUG only if not yet defined.

	* sysdeps/i386/selectbits.h: Don't use casts, use element access.

	* sysdeps/libm-i387/s_nextafterl.c: Correct result value for x==y.

	* sysdeps/libm-ieee754/s_cbrt.c: Correct result for NAN, Inf, 0.0.
	* sysdeps/libm-ieee754/s_cbrtf.c: Likewise.
	* sysdeps/libm-ieee754/s_cbrtl.c: Likewise.

	* sysdeps/mach/hurd/cthreads.c: Include <libc-lock.h>, not
	<bits/libc-lock.h>.

	* sysdeps/unix/sysv/linux/socketbits.h: Add new values and correct
	types in struct cmsghdr.

	* sysdeps/unix/sysv/linux/alpha/ieee_set_fp_control.S: Correct
	loading of return address.

	* sysdeps/unix/sysv/linux/net/if.h: Add new values.
	* sysdeps/unix/sysv/linux/net/if_arp.h: Likewise.

	* sysdeps/unix/sysv/linux/sys/quota.h: Include <asm/types.h>.

1997-09-16 04:32  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/ptrace.h (ptrace): Change return
	value type to long int.
	* sysdeps/unix/sysv/linux/ptrace.c: Likewise.  Adopt local variable
	types.

1997-11-06 00:06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/writev.c: Correct condition to leave the loop.

1997-10-28 17:40  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/s_cbrt.c: Testing the returned exponent for
	zero isn't enough to determine illegal arguments.
	* sysdeps/libm-ieee754/s_cbrtf.c: Likewise.
	* sysdeps/libm-ieee754/s_cbrtl.c: Likewise.

1997-08-20 05:30  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/e_remainder.S: Pretty print.
	* sysdeps/libm-i387/e_remainderf.S: Likewise.
	* sysdeps/libm-i387/e_remainderl.S: Pop extra value from FPU stack.

1997-10-22 18:47  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/rpc/clnt.h: Add get_myaddress prototype.

1997-10-25 18:56  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/stdlib.h: Remove mblen optimization.
	* stdlib/mblen.c: Rewrite to make sure global state is not changed.
	Reported by anderson@metrolink.com.

1997-10-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* po/Makefile ($(mo-installed)): Don't fail during installation if
	files don't exist (might happen if msgfmt doesn't exist) (PR 328).
	Suggested by Wolfram Gloger <wmglo@dent.med.uni-muenchen.de>.

1997-09-30 18:03  Ulrich Drepper  <drepper@cygnus.com>

	* misc/sys/select.h: Define pselect only is __USE_POSIX since this
	header is used in some others as well for historical reasons.

1997-09-27 01:14  Ulrich Drepper  <drepper@cygnus.com>

	* locale/setlocale.c (setname): Only remove old name when it
	is for category LC_ALL.

1997-11-03 00:20  Ulrich Drepper  <drepper@cygnus.com>

	* intl/localealias.c (read_alias_file): Correct handling of line
	reader which sometimes skipped complete lines (PR 205).

1997-11-09 18:15  Ulrich Drepper  <drepper@cygnus.com>

	* csu/Makefile (CFLAGS-initfini.s): Correctly fix moving function
	definition.  Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* stdlib/strtod.c: Handle numbers like 0.0e10000 correctly which
	produce 0.0.  Reported by Joe Keane <jgk@jgk.org>.

1997-11-09 18:15  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules (libc.so): Fix typo.

	* csu/Makefile (CFLAGS-initfini.s): Correctly fix moving function
	definition.  Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* stdlib/strtod.c: Handle numbers like 0.0e10000 correctly which
	produce 0.0.  Reported by Joe Keane <jgk@jgk.org>.

1997-09-19 14:11  Ulrich Drepper  <drepper@cygnus.com>

	* string/argz.h (__argz_next): Cast NULL to char * to satisfy C++
	compilers.
	Reported by Mirko Streckenbach <mirko@ramz.ing.tu-bs.de>.

	* catgets/catgets.c (catopen): Correctly allocate string of nlspath.
	Reported by Charles C. Fu <ccwf@klab.caltech.edu>.

1997-11-18 02:31  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/_G_config.h: Define __need_NULL to get definition
	for NULL.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.
	Reported by H.J. Lu <hjl@gnu.ai.mit.edu>.

	* configure.in: Correct test for bash2.
	Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* locale/Makefile (CFLAGS-charmap.c): Add -Wno-char-subscripts.
	(CFLAGS-locfile.c): Likewise.
	Suggested by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* misc/hsearch_r.c (hsearch_r): Avoid undefinitely search for
	non-existing entry if the table is full.

	* stdio-common/printf_fp.c: Don't define NDEBUG if already defined.

1997-11-18 18:04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/pty.c: Define REVOKE to use revoke function.
	Replace revoke call by use of REVOKE.
	* sysdeps/unix/sysv/linux/pty.c: New file.  Define REVOKE as
	empty and #include generic version.
	Suggested by Zack Weinberg <zack@rabi.phys.columbia.edu>.

1997-11-18 06:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/pty.c: Make thread safe.  Fix bug when calling
	again after successful call.
	Patch by Marc Lehmann <pcg@goof.com>.

1997-11-17 02:02  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/thread-m.h: Remove malloc_key-data definition.
	Reported by Trevor Johnson <trevor@jpj.net>.

1997-10-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/filesys.texi (Scanning Directory Content): Document error
	case more.

	* dirent/scandir.c (scandir): Ignore errors from select function.
	Suggested by urbanw@cs.umu.se (closes PR libc/316).

1997-09-04 15:57  Ulrich Drepper  <drepper@cygnus.com>

	* termios/cfsetspeed.c (cfsetspeed): Change return value to int.
	* termios/termios.h: Change prototype accordingly.

1997-09-28 08:27  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/rpcsvc/yp_prot.h: Rename struct keydat to struct keydat_t
	for C++.

1997-11-14 05:59  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt_r: Use version fromglibc 2.1 which corrects several
	bugs.

1997-11-13 15:00  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_compat/compat-grp.c: Carry over several patches from glibc
	2.1 development version  to fix some more severe bugs.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nis/ypclnt.c: Likewise.
	Patch by Thorsten Kukuk <kukuk@vt.uni-paderborn.de>.

	* version.h (VERSION): Bump to 2.0.6.

1997-11-09 18:15  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/stdtod.c: Handle numbers like 0.0e10000 correctly which
	produce 0.0.  Reported by Joe Keane <jgk@jgk.org>.

1997-10-31 23:08  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c (glob): If calling glob_in_dir for a list which was
	generated by a glob call disable GLOB_ERR since there might be
	non-directories in the list (PR203).

1997-10-30 06:04  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt.c: Call correct reentrant functions.

1997-10-28 04:26  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.c (__tzfile_compute): Use negated value of offset for
	timezone variable.
	* time/tzset.c (tz_compute): Likewise.
	Reported by Erik Troan <ewt@redhat.com>.

1997-10-29 03:54  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/nss_dns/dns-host.c: Change variable pointed to by h_errnop
	in all error cases (PR 244).

1997-10-28 02:51  Ulrich Drepper  <drepper@cygnus.com>

	* manual/filesys.texi: Correct prototype in readdir_r description.
	Reported by Jim Meyering <meyering@eng.ascend.com>.

1997-10-25 04:00  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Favour exact
	matching of version function if both the general (1) and
	glibc-specific (3) entry are present.

1997-10-18 15:03  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Correct types of some
	elements in struct msghdr and struct cmsghdr, to keep in step with
	the kernel.

1997-10-09 05:54  Ulrich Drepper  <drepper@cygnus.com>

	* nss/digits_dots.c: Place `result' in resbuf and not in `buffer'.
	* nss/getXXbyYY_r.c: Make sure digits_dots.c sees `resbuf' as
	struct and not a pointer.  Little optimizations.

1997-10-07  Paul Eggert  <eggert@twinsun.com>

	* intl/loadmsgcat.c (_nl_load_domain):
	Fix &&/|| typo when checking file size.

1997-10-07 18:11  Ulrich Drepper  <drepper@cygnus.com>

	* time/africa: Update from tzdata1997i.

1997-10-03 20:56  Jason Merrill  <jason@yorick.cygnus.com>

	* malloc/obstack.h (obstack_empty_p): New macro.

1997-09-09  Paul Eggert  <eggert@twinsun.com>

	* time/mktime.c (__mktime_internal): Declare sec_requested even if
	!LEAP_SECONDS_POSSIBLE, since it's needed at the end when checking
	for time_t overflow.

1997-09-10 04:42  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip_fw.h (struct ip_fw): Correct
	type of fw_pcnt and fw_bcnt fields to match kernel.
	Patch by a sun <asun@zoology.washington.edu>.

1997-09-09 22:11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getcwd.c: Correct test for too small buffer.
	Reported by Erik Troan <ewt@redhat.com>.

1997-09-06  Paul Eggert  <eggert@twinsun.com>

	Fix gmtime so that it reports leap seconds when TZ
	indicates that leap seconds are desired.

	* time/gmtime.c (<stddef.h>): Remove unnecessary include.
	(gmtime): Put after gmtime_r, to help the compiler inline.
	(__tz_convert): New decl.
	(gmtime_r): Use __tz_convert instead of __offtime,
	so that leap seconds are handled correctly.

	* time/localtime.c (<errno.h>, <libc-lock.h>): Remove includes that
	are now unnecessary.
	(__tzset_internal, __tz_compute, __tzfile_compute, __use_tzfile,
	__tzset_lock): Remove extern decls that are now unnecessary.
	(localtime_internal): Moved to __tz_convert in tzset.c.
	so that localtime and gmtime can both use it easily.
	(localtime): Put after localtime_r, to help the compiler inline.
	(localtime_r): Use __tz_convert instead of localtime_internal.

	* time/strftime.c (__tz_compute): Remove unused (and now incorrect)
	decl.

	* time/tzfile.c (__tzfile_compute): New arg USE_LOCALTIME.

	* time/tzset.c (<errno.h>): Include.
	(_tmbuf): New decl.
	(__tzfile_compute): New function.
	(tz_compute): Renamed from __tz_compute.  No longer extern.
	Remove redundant call to tzset_internal.
	(tzset_internal): Renamed from __tzset_internal.  No longer extern.
	(tzset_lock): Renamed from __tzset_lock.  No longer extern.
	(__tz_convert): New function, containing functionality of old
	localtime_internal function, plus locking and optional UTC.

1997-09-06  Paul Eggert  <eggert@twinsun.com>

	* tzfile.c (__tzfile_read): Don't read a file if TZ is the empty
	string, just use UTC without leap seconds.  This is for compatibility
	with the Olson code.

1997-09-06  Paul Eggert  <eggert@twinsun.com>

	* time/tzset.c (__tzname_max): Lock tz data structures before
	invoking tzset_internal.

	* time/tzfile.c: Define compute_tzname_max statically.

1997-09-07 15:51  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/selectbits.h [__GNUC__] (__FD_ZERO, __FD_SET, __FD_CLR,
	__FD_ISSET): Use correct casts to address array correctly.
	Reported by urbanw@cs.umu.se.

1997-09-05 06:11  Ulrich Drepper  <drepper@cygnus.com>

	* gmon/gmon.c (write_bb_counts): Make sure entries are written before
	next head.  Reported by baccala@FreeSoft.org.

1997-09-01 14:16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/stub/sigaction.c: Fix typo.
	Reported by Klaus Reichl <klaus.reichl@aut.alcatel.at>.

1997-08-28 17:30  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/catgets.c (catopen): Correctly determine length of string
	in NLSPATH environment variable.  Patch by HJ Lu <hjl@gnu.ai.mit.edu>.

1997-08-26 20:17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/tcp.h: Fix typo.

1997-08-25 17:01  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/selectbits.h: Correct assembler versions to work even
	for descriptors >= 32.

	* stdlib/alloca.h: Don't define alloca to __alloca since if gcc
	is used __alloca is not defined to __builtin_alloca and so might
	not be available.
	Reported by Uwe Ohse <uwe@ohse.de>.

	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Define macros in a special
	way if gcc is not used and so dev_t is an array.
	Reported by Uwe Ohse <uwe@ohse.de>.

	* sysdeps/unix/sysv/linux/netinet/tcp.h: Include features.h instead
	of sys/cdefs.h.  Pretty print.

1997-08-25 12:22  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/rpc/xdr.h: Change name of parameters in prototypes of
	xdr_reference, xdrmem_create, and xdrstdio_create because of clash
	with g++ internal symbols.
	Patch by Sudish Joseph <sj@eng.mindspring.net>.

1997-08-24 18:36  Ulrich Drepper  <drepper@cygnus.com>

	* string/argz.h: Add missing __END_DECLS.
	Patch by Miles Bader <miles@gnu.ai.mit.edu>.

1997-08-24 00:48  Ulrich Drepper  <drepper@cygnus.com>

	* locale/iso-4217.def: Update for more complete ISO 4217 match.

	* libio/stdio.h: Make {,v}snprintf functions available is __USE_BSD.

	* sysdeps/generic/dl-sysdep.c: Don't use fstat, use fxstat.

1997-08-17  Paul Eggert  <eggert@twinsun.com>

	* tzset.c (__tzset_internal): Fix memory leak when the user
	specifies a TZ value that uses a default rule file.
	Do not assume US DST rules when the user specifies
	that there is no DST.

1997-08-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sys/mount.h: Remove the IS_* macros,
	they operate on internal kernel structures and have no place in a
	user header.

1997-08-18 01:52  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/libc-lock.h: Fix typo.
	Reported by Marcus G. Daniels <marcusd@cathcart.sysc.pdx.edu>.

1997-08-16 21:33  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/hurd/Dist: Add cthreads.c.

	* catgets/gencat.c (usage): Fix help text.

	Update of UTMP interface.
	* login/Makefile (routines): Add utmpname, remove utmp_db.
	* login/getutent.c: Rename to __getutent and make getutent a weak
	alias.
	* login/getutent.c: Rename to __getutid and make getutid a weak
	alias.
	* login/getutent.c: Rename to __getutline and make getutline a weak
	alias.
	* login/getutent_r.c: Rewrite to use jump table correctly.
	* login/getutid_r.c: Likewise.
	* login/getutline_r.c: Likewise.
	* login/updwtmp.c: Likewise.
	* login/login.c (login): Correct test for result of utmpname.
	Use updwtmp instead of implementing this here again.
	* login/logout.c (logout): Correct test for result of utmpname
	and pututline.  Handle ut_type field correctly if it exists.
	* login/utmp-private.h: Update for changed internal functions.
	* login/utmp.h: Reformat and correct typos.
	* login/utmp_file.c: Rewrite lock handling.
	* login/utmpname.c: New file.
	Patches by Mark Kettenis <kettenis@phys.uva.nl>.

	* socket/sys/socket.h (getpeername): Correct type of len argument.
	Reported by a sun <asun@zoology.washington.edu>.

	* sysdeps/generic/_G_config.h: Include <gnu/types.h>, not
	<bits/types.h>.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.

	* sysdeps/mach/libc-lock.h: Introduce thread-specific key handling
	functions.

	* sysdeps/mach/hurd/Makefile [subdir=misc] (sysdep_routines): Add
	cthreads.
	* sysdeps/mach/hurd/cthreads.c: New file.

1997-08-16 04:06  Ulrich Drepper  <drepper@cygnus.com>

	* assert/assert.h [__USE_GNU]: Undefine assert_perror.
	Reported by Theodore C. Belding <Ted.Belding@umich.edu>.

1997-08-10 18:29:08 1997  Mark Kettenis  <kettenis@phys.uva.nl>

	* login/login.c (login): Check for correct return value of
	utmpname.

1997-08-10 18:44  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzset.c: Interpret no DST information in user provided time
	zone specification as it is meant: no DST.
	Patch by Paul Eggert <eggert@twinsun.com>.

1997-08-09 13:12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/libc-lock.h (__libc_once): Fix typos.
	Add macros for key handling.
	* sysdeps/mach/hurd/Makefile [$(subdir)=misc] (sysdep_routines): Add
	cthreads.
	* sysdeps/mach/hurd/cthreads.c: New file.
	Patches by Marcus G. Daniels <marcusd@cathcart.sysc.pdx.edu>.

1997-08-08  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/bits/libc-lock.h (__libc_once): Define correctly.

1997-08-08 02:25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/stub/libc-lock.h (__libc_once_define): Add new parameter
	for storage class.
	* inet/inet_ntoa.c: Add static to parameter list for __libc_once_init.

	* login/Makefile (routines): Add updwtmp.
	* login/logwtmp.c: Move definition of updwtmp to ...
	* login/updwtmp.c: here.  New file.

	* sysdeps/libm-ieee754/s_cbrt.c: Complete rewrite.
	* sysdeps/libm-ieee754/s_cbrtf.c: Likewise.
	* sysdeps/libm-ieee754/s_cbrtl.c: Likewise.

1997-07-26 14:42  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/stdfiles.c (_libio_using_thunks): Define if
	_G_USING_THUNKS is defined.

	* libio/_G_config.h: Moved to
	* sysdeps/generic/_G_config.h: ...here.

	* sysdeps/unix/sysv/linux/_G_config.h: New, add vtable thunks support.

1997-08-07  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/profil.c (fetch_samples): Put parens in the
	right place.

1997-08-06  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/profil.c (fetch_samples): Do arithmetic on
	PC's in long long to avoid overflow.

1997-08-07  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/bits/libc-lock.h (__libc_once, __libc_once_define):
	New macros.

1997-08-06 13:54  Ulrich Drepper  <drepper@cygnus.com>

	* gmon/gmon.c (_mcleanup): Fix typos.

	* gmon/sys/gmon.h: Add prototype for write_profiling.

1997-08-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/__longjmp.c: Replace call to abort by infinite
	loop, to avoid dragging stdio into the dynamic linker.

1997-08-04 13:06  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* gmon/gmon.c (write_gmon): New function; guts from _mcleanup.
	(_mcleanup): Use write_gmon.
	(write_profiling): This function can be safely called at any time
	to write a current histogram without interfering with ongoing
	profiling.

	* sysdeps/mach/hurd/profil.c (fetch_samples): Initialize NSAMPLES.

1997-08-01 17:53  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/profil.c (fetch_samples): Sample buffer need
	not be vm_deallocated; it's a stack buffer.
	(profil_vm_deallocate): Delete prototype.
	(#include <../mach/RPC_vm_deallocate_rpc.c>): Drop this
	inclusion.
	* sysdeps/mach/hurd/Makefile
	($(common-objpfx)hurd/../mach/RPC_vm_deallocate_rpc.c): Delete
	this rule.

	* sysdeps/mach/hurd/profil.c (fetch_samples): New function, guts
	from profile_waiter.
	(profile_waiter): Use fetch_samples.
	(profil): When turning off profiling, fetch the last bunch of
	samples before disabling PC sampling.
	(fetch_samples): Add prototype.

1997-07-30 12:53  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/Makefile: Give normal rules for the mach RPC
	source included by profil.c instead of trying to use
	before-compile grot.

1997-07-23 15:04  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/profil.c (profile_waiter): Do vm_deallocate
	after releasing lock.  Use special RPC stubs and avoid assert,
	thus making this function entirely independent of the threadvar
	mechanism and of cthreads.
	(lock): Convert to be a spin lock instead of a mutex, so that the
	waiter thread need not use cthreads.  Use a fork prepare hook
	instead of _hurd_fork_locks to make sure we are clean before
	forking.
	(fork_profil_child): Renamed from fork_profil.
	(profil_reply_port): New variable.
	(profil_vm_deallocate, profil_task_get_sampled_pcs): Special RPC
	stubs made by special hacks.
	* sysdeps/mach/hurd/Makefile (before-compile): Add the mach RPC
	source files that profil.c needs if we are in the gmon directory.

	* mach/setup-thread.c (__mach_setup_thread): Delete avoidance of a
	cthreads bug that hasn't existed for two years.

1997-08-04 15:29  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/localedef.c (main): Set bit in avail for those
	categories which are successfully read.
	* locale/programs/locfile.c (check_all_categories): Don't check
	categories if they are not available.
	(write_all_categories): Don't write categories if they are not
	available.

	* socket/sys/socket.h (bind, getsockname, connect, sendto, recvfrom,
	getsockopt, setsockopt, accept): Change size argument to type
	socklen_t.
	Pretty print.
	* manual/socket.texi: Describe socklen_t and change prototypes of
	socket functions to use socklen_t.
	* sysdeps/generic/bits/socket.h: Define socklen_t.
	(struct msghdr): Correct types to use socklen_t.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Likewise.

	* stdio-common/printf_fp.c (__printf_fp): Correct rounding of numbers
	1.0 < x < 8.0.
	* stdio-common/tfformat.c: Add new tests for above bug.

	* termios/cfsetspeed.c: Rewrite loop to do what it shall do.

	* wcsmbs/Makefile (tests): Add tst-wcstof.
	* wcsmbs/tst-wcstof.c: New file.
	* wcsmbs/wcstof.c (FLT): Define as FLT.

1997-08-02 01:57  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/ptrace.c: Don't set errno in error
	case since the __syscall_ptrace call already did this.
	Reported by Philip Gladstone <philip@talon.raptor.com>.

1997-07-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/fsuid.h: Change include
	<gnu/types.h> to <sys/types.h>.

1997-08-01 23:18  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locale.c (print_escaped): New function.
	(show_info): Use print_escaped if strings can control unprintable
	characters.
	Patch by Jochen Hein <jochen.hein@delphi.central.de>.

1997-07-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* md5-crypt/Makefile (extra-objs): Add onlymd5-crypt.o for
	dependencies.

1997-07-28 23:35  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_compat/compat-grp.c (internal_setgrent): Set FD_CLOEXEC
	for stream on input file.
	* nis/nss_compat/compat-pwd.c (internal_setpwent): Likewise.
	* nis/nss_compat/compat-spwd.c (internal_setspent): Likewise.
	* nss/nss_db/db-XXX.c (internal_setent): Likewise.
	* nss/nss_db/db-alias.c (internal_setent): Likewise.
	* nss/nss_db/db-netgrp.c (internal_setent): Likewise.
	* nss/nss_files/files-XXX.c (internal_setent): Likewise.
	* nss/nss_files/files-alias.c (internal_setent): Likewise.
	* nss/nss_files/files-netgrp.c (internal_setent): Likewise.

1997-07-23 05:10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/fsuid.h: New file.
	Provided by Michael Deutschmann <ldeutsch@mail.netshop.net>.
	* sysdeps/unix/sysv/linux/Makefile (headers): Add sys/fsuid.h.
	* sysdeps/unix/sysv/linux/Dist: Add sys/fsuid.h.

1997-07-19 22:53  Ulrich Drepper  <drepper@cygnus.com>

	* time/africa: Update from tzdata1997g.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/europe: Likewise.
	* time/iso3166.tab: Likewise.
	* time/zone.tab: Likewise.
	* time/private.h: Update from tzcode1997f.
	* time/scheck.c: Likewise.

1997-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* include/gnu-versions.h (_GNU_OBSTACK_INTERFACE_VERSION):
	Synchronize with malloc/obstack.c.

1997-07-15  Marcus G. Daniels  <marcus@cathcart.sysc.pdx.edu>

	* manual/Makefile (INSTALL_INFO): Introduce variable to override
	path to install-info for systems like Debian that have an
	install-info with a different command line interface from the
	canonical GNU texinfo version.

1997-07-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/posix/ttyname_r.c (__ttyname_r): Correct comment.
	* posix/unistd.h: Likewise.
	* sysdeps/stub/ttyname_r.c: Likewise.

1997-06-22  Paul Eggert  <eggert@twinsun.com>

	* time/strftime.c (strftime): Use tm_zone if available, even if _LIBC.

	* time/tzfile.c (__tzstring): New decl.
	(__tzfile_read, __tzfile_default): Set __tzname to permanent strings.
	(__tzfile_default): First two args are now const char *.

	* time/tzset.c (__tzstring): New function.
	(tz_rule): Name is now const char *.
	(struct tzstring_head): New type.
	(tzstring_list, tzstring_last_buffer_size): New static vars.
	(__tzset_internal): Time zone names are now permanent, not temporary.

1997-07-12 18:47  Ulrich Drepper  <drepper@cygnus.com>

	* assert/assert.h [!NDEBUG] (assert, assert_perror): Don't use ||
	and && in tests to allow use in C++ code which overloads these
	operators.  Reported by Istvan Marko <istvan@cmdmail.amd.com>.

1997-07-12 17:56  Ulrich Drepper  <drepper@cygnus.com>

	* login/login.c (tty_name): Test return value of ttyname_r for !=
	0, not < 0.
	* misc/ttyslot.c (ttyslot): Test return value of ttyname_r for ==
	0, not >= 0.
	* sysdeps/unix/getlogin.c (getlogin): Test return value of
	ttyname_r for != 0.
	* sysdeps/unix/getlogin_r.c (getlogin_r): Likewise.

1997-07-11 03:00  Ulrich Drepper  <drepper@cygnus.com>

	* inet/inet_ntoa.c: Prevent looking for thread data key if we found
	one.

	* signal/sigandset.c: Include stddef.h to get NULL defined.
	* signal/sigisempty.c: Likewise.
	* signal/sigorset.c: Likewise.

1997-07-09 07:19  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* posix/execvp.c (execvp): Handle ESTALE.

1997-07-09 08:16  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/fileops.c (_IO_file_underflow): Adjust pointers
	before calling _IO_SYSREAD ().

1997-07-08 13:59  Ulrich Drepper  <drepper@cygnus.com>

	* time/strftime.c (spaces, zeroes): Handle broken SGI compiler.
	Patch by Richard Stallman <rms@gnu.ai.mit.edu>.

1997-07-08 02:18  Ulrich Drepper  <drepper@cygnus.com>

	* io/lockf.c (lockf): Clear fl before using.
	Patch by sr@adb.fr.

	* libio/strops.c: Correctly handle _IO_write_end.

	* nss/nss_files/files-netgrp.c (_nss_netgroup_parseline): Don't
	panic if setnetgrent wasn't called before, return error.
	Patch by Thorsten Kukuk <kukuk@uni-paderborn.de>.

	* time/mktime.c: Define localtime_r function as my_mktime_localtime_r
	if locally defined.
	* time/strftime.c: Define localtime_r function as my_ftime_localtime_r
	if locally defined.
	Define tm_diff function as ftime_tm_diff if locally defined.
	Reported by Richard Stallman <rms@gnu.ai.mit.edu>.

1997-07-04 18:04  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* stdlib/tst-strtol.c: Don't assume cpp takes ~0UL as long
	in cc1.  Cpp in gcc doesn't do it.

1997-07-05 11:56  Ulrich Drepper  <drepper@cygnus.com>

	* login/login.c (tty_name): Use newly allocated buffer.
	Patch by Jaakko Hyvtti <jaakko.hyvatti@iki.fi>.

	* time/asctime.c: Never translate week and month name according
	to LC_TIME.  Patch by Paul Eggert <eggert@twinsun.com>.

1997-06-28 20:52  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add getresgid and
	setresgid.

1997-06-27 02:17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add quotactl.
	Reported by a sun.

1997-06-26 14:28  Ulrich Drepper  <drepper@cygnus.com>

	* time/strftime.c: Don't define `memcpy' macro if HAVE_MEMCPY is
	defined.  Reported by Akim Demaille <demaille@inf.enst.fr>.

1997-06-23 23:39  Ulrich Drepper  <drepper@cygnus.com>

	* math/math.h: Add warning about use of M_* constants.
	Pretty print.

1997-06-21 02:48  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locale.c: Correct comment.

	* po/ko.po: Update.

1997-06-20 02:35  a sun  <asun@zoology.washington.edu>

	* sysdeps/unix/sysv/linux/netipx/ipx.h: Don't use kernel header.

1997-06-19 19:38  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c: Correct a few typos.  Reported by Erik Troan.

	* manual/Makefile (distribute): Add dir.
	* manual/dir: New file.

1997-06-19 07:37  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* time/tzfile.c (__tzfile_read): Store getc () return in int.

1997-06-18  Miles Bader  <miles@gnu.ai.mit.edu>

	* string/Makefile (routines): Add argz-replace.

1997-06-12  Miles Bader  <miles@gnu.ai.mit.edu>

	* string/argz.h (__argz_replace, argz_replace): New declarations.
	* string/argz-replace.c: New file.

1997-06-18 00:11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/vfscanf.c (inchar, ungetc): Don't count EOF as
	character read in/put back.
	* stdio-common/tstscanf.c: Add test case for this.

1997-06-18 12:01  Ulrich Drepper  <drepper@cygnus.com>

	* manual/Makefile (install): Make sure `dir' file exists if we use
	install-info.

1997-06-17 19:32  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile (info): Depend on dir-add.info.

1997-06-17 00:26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/stub/e_acoshl.c: Set errno to ENOSYS.
	* sysdeps/stub/e_acosl.c: Likewise.
	* sysdeps/stub/e_asinl.c: Likewise.
	* sysdeps/stub/e_atan2l.c: Likewise.
	* sysdeps/stub/e_expl.c: Likewise.
	* sysdeps/stub/e_fmodl.c: Likewise.
	* sysdeps/stub/e_j0l.c: Likewise.
	* sysdeps/stub/e_j1l.c: Likewise.
	* sysdeps/stub/e_jnl.c: Likewise.
	* sysdeps/stub/e_lgammal_r.c: Likewise.
	* sysdeps/stub/e_log10l.c: Likewise.
	* sysdeps/stub/e_logl.c: Likewise.
	* sysdeps/stub/e_powl.c: Likewise.
	* sysdeps/stub/e_rem_pio2l.c: Likewise.
	* sysdeps/stub/e_sqrtl.c: Likewise.
	* sysdeps/stub/k_cosl.c: Likewise.
	* sysdeps/stub/k_rem_pio2l.c: Likewise.
	* sysdeps/stub/k_sinl.c: Likewise.
	* sysdeps/stub/k_tanl.c: Likewise.
	* sysdeps/stub/s_atanl.c: Likewise.
	* sysdeps/stub/s_erfl.c: Likewise.
	* sysdeps/stub/s_expm1l.c: Likewise.
	* sysdeps/stub/s_log1pl.c: Likewise.

1997-06-16 03:07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/k_standard.c: Undo change of Tue Aug 6
	01:13:56 1996.

1997-06-15 00:43  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/s_asinh.S: Handle +-Inf and NaN correctly.
	* sysdeps/libm-i387/s_asinhf.S: Likewise.
	* sysdeps/libm-i387/s_asinhl.S: Likewise.
	* sysdeps/libm-i387/s_nearbyint.S: Correctly leave function.
	* sysdeps/libm-i387/s_nearbyintf.S: Likewise.
	* sysdeps/libm-i387/s_nearbyintl.S: Likewise.

1997-06-12 21:22  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (manual/dir-add.info): New rule.

	* inet/arpa/tftp.h (struct tftphdr): Change type of tu_block to
	`unsigned short'.

	* manual/Makefile (dir-add.texi): Also emit wrapper text for
	info/install-info.
	(distribute): Add dir-add.texi and dir-add.info.
	(mostlyclean): Add dir-add.info.
	(realclean): Add dir-add.texi.
	(install): Add entries in `dir' file using install-info.

	* manual/libc.texinfo: Add @dircategory and @direntry text.
	Reported by Miles Bader <miles@gnu.ai.mit.edu>.

1997-06-12 12:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h (__M_SQRT2): Define here since we
	cannot rely on M_SQRT2 being defined.  (log1p): Use __M_SQRT2 not
	M_SQRT2.
	* math/math.h (_Mldbl): Define even if M_* constants are not
	defined.
	Reported by corsepiu@faw.uni-ulm.de.

1997-06-12 03:08  Philip Blundell  <Philip.Blundell@pobox.com>

	* nss/getXXbyYY_r.c (do_weak_alias): Remove extra parentheses.

1997-06-11 13:22  Ulrich Drepper  <drepper@cygnus.com>

	* misc/regexp.h (compile): Allow use of macro INIT for variable
	declaration.  Add documentation for INIT.
	Reported by Robert Bihlmeyer <robbe@orcus.priv.at>.

1997-06-11 10:47  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/net/if_arp.h: Add two new hardware types.

1997-06-05 23:10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Dist: Remove netatalk/atalk.h and
	netinet/icmp.h, add netatalk/at.h.
	* sysdeps/unix/sysv/linux/powerpc/Dist: Remove termios.h.
	* sysdeps/unix/sysv/linux/sparc/Dist: Remove start.c.

1997-06-05 13:43  Fila Kolodny  <fila@filapc.ibi.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add netipx/ipx.h.

1997-06-05 17:08  Ulrich Drepper  <drepper@cygnus.com>

	* string/argz-addsep.c: Correct weak alias.
	Reported by Ben Pfaff <pfaffben@pilot.msu.edu>.

	* locale/setlocale.c (setlocale): Free variable with locale path
	before returning.
	(setname): Don't test for _nl_current[category] being NULL before
	freeing.
	Reported by Ben Pfaff <pfaffben@pilot.msu.edu>.

1997-06-03 23:42  Ulrich Drepper  <drepper@cygnus.com>

	* time/Makefile: Make tzselect depend on config.make.

1997-06-01 12:48  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/gnu/types.h (__fd_mask): Change
	type to `unsigned long int'.
	Patch by Richard Henderson <richard@twiddle.rth.home>.

1997-05-30 17:34  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-hosts.c: Delete inclusion of
	"../resolv/mapv4v6hostent.h".

1997-05-31 02:33  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libio.h: Define bits for libg++-2.8.

1997-05-30 09:50  Richard Henderson  <rth@tamu.edu>

	* manual/maint.texi: ECOFF hasn't been tested in ages and I don't
	plan on doing so ever again.  Don't say alpha-linuxecoff is known
	to work.

	* sysdeps/alpha/Makefile: Temporarily turn on -mieee globally.  This
	will last until I figure out how to build a parallel libm_ieee.

	* sysdeps/alpha/fpu/fpu_control.h: Update copyright.  Change default
	FP mode to round to nearest, no exceptions as for Intel.
	* sysdeps/unix/sysv/linux/alpha/setfpucw.c: Add copyright.
	(rdfpcr): Use excb rather than trapb.  Be more efficient about
	getting at the fpcr.
	(wrfpcr): Likewise.
	(__setfpucw): Reformat.

	* sysdeps/unix/alpha/sysdep.S: Tiny cleanups.
	* sysdeps/unix/sysv/linux/alpha/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/brk.S: Don't use jmp macro to make
	sure the stack frame is released the very instruction before the
	real jump out.
	* sysdeps/unix/sysv/linux/alpha/ieee_get_fp_control.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/ieee_set_fp_control.S: Likewise.

	* sysdeps/unix/sysv/linux/alpha/gnu/types.h: Undef some bits we may
	have gotten from <linux/posix_types.h>.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Add definition for Miata.

1997-05-29 13:59  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (manual/dir-add.texi): Force execution.

1997-05-29 13:55  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdlib/strfmon.c: Don't run past EOS after `='.

1997-05-29 12:48  Ulrich Drepper  <drepper@cygnus.com>

	Update resolver code to bind-4.9.6-T1A.
	* resolv/Banner: Update.
	* nss/digits_dots.c: Adapt text address matching to T1A.
	* nss/nss_files/files-hosts.c: Always use inet_pton.
	* resolv/base64.c (b64_pton): Follow T1A but don't use this code since
	it would lead to warnings.
	* resolv/gethnamaddr.c (getanswer): Test host name for maximal length
	at several places.
	* resolv/inet_net_pton.c (inet_net_pton_ipv4): Correct typo in comment.
	* resolv/res_comp.c (dn_expand): Check for overflow.
	(dn_comp): Likewise.
	* resolv/res_debug.c (precsize_aton): Better implementation.
	* resolv/res_init.c (res_init): Make `buf' of size MAXDNAME.
	* resolv/res_send.c (res_send): Check for overflow in descriptor set.
	* resolv/nss_dns/dns-host.c (getanswer_r): Test host name for maximal
	length at several places.

1997-05-28 21:56  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/net/ppp_defs.h: Include <time.h> for
	time_t.

	* login/pty.h: Include <ioctl-types.h> for definition of struct
	winsize.

1997-05-28 22:51  Ulrich Drepper  <drepper@cygnus.com>

	* time/strptime.c (strptime_internal, case 'Y'): Restrict year
	number to four digits and to representable range for 4 byte time_t
	values.
	Patch by H.J. Lu <hjl@lucon.org>.

1997-07-16  Miles Bader  <miles@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/mmap.c (__mmap): Check for !MAP_SHARED rather
	than MAP_COPY|MAP_PRIVATE, since those values are defined wierdly.
	Return EACCES rather than EGRATUITOUS if a R/W request isn't writable.

1997-07-05 11:56  Ulrich Drepper  <drepper@cygnus.com>

	* login/login.c (tty_name): Use newly allocated buffer.
	Patch by Jaakko Hyvtti <jaakko.hyvatti@iki.fi>.

	* time/asctime.c: Never translate week and month name according
	to LC_TIME.  Patch by Paul Eggert <eggert@twinsun.com>.

1997-07-01 16:40  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* hurd/hurdsig.c: Include <hurd/id.h>.
	(reauth_proc): Call proc_setowner appropriately too.

1997-05-29 14:02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sys/ttydefaults.h (CEOL, CSTATUS): Use
	correct value for _POSIX_VDISABLE.

1997-05-06 13:25  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* stdio-common/bug3.c: use /tmp/bug3.test for concurrency.

	* stdio-common/bug4.c: use /tmp/bug4.test for concurrency.

1997-05-26 23:29  Ulrich Drepper  <drepper@cygnus.com>

	* Net release 2.0.4.

1997-05-26 22:51  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Use AC_PROG_CC_LOCAL instead of AC_PROC_CC.
	* aclocal.m4: Add AC_PROG_CC_LOCAL which does not fail for
	environments in which linking is not possible at configure time
	(since te libc is just build).
	Based on patches by Marcus G. Daniels <marcus@cathcart.sysc.pdx.edu>.

1997-05-26 18:58  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/random_r.c (__initstate_r): Initialize randomizer type in
	state array only at right place.
	Reported by Sven Verdoolaege <skimo@breughel.ufsia.ac.be>.

	* stdlib/erand48_r.c (__erand48_r): Don't generate numbers in
	[0.5,1.0) but really in [0.0, 1.0).
	Patch by Oliver Gathmann <gathmann@scar.utoronto.ca>.

1997-05-25 09:51  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/i386/elf/start.S: Change local label "nofini"
	to ".Lnofini".

	* sysdeps/i386/i386-mcount.S: Use GOT, instead of GOTOFF.

1997-05-25 20:19  Ulrich Drepper  <drepper@cygnus.com>

	* time/zic.c: Update from tzcode1997e.

	* sysvipc/sys/ipc.h: Print warning if _XOPEN_SOURCE and _SVID_SOURCE
	are not defined.

1997-05-24 17:45  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* gmon/gmon.c (_mcleanup): Free tostruct array allocated in
	monstartup.

1997-05-25 00:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h (logb): Fix thinko, reverse output
	values.
	Reported by Andreas Jaeger <aj@arthur.rhein-neckar.de>.

	* sunrpc/svc.c (svc_register): Change type of protocol parameter to
	u_long.

1997-05-22 05:40  Richard Henderson  <rth@tamu.edu>

	* sysdeps/alpha/dl-machine.h (elf_machine_runtime_setup): If we are
	not looking at the new thread-safe .plt, don't be lazy about relocs.
	(_dl_runtime_resolve): Fix up arithmetic for new .plt layout.
	(elf_alpha_fix_plt): Insert wmb as appropriate to ensure safety.
	* elf/dynamic-link.h (ELF_DYNAMIC_RELOCATE): Let
	elf_machine_runtime_setup() decide if we can actually be lazy.
	* elf/rtld.c (_dl_start): So don't call it.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_runtime_setup): Return lazy.
	* sysdeps/m68k/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/powerpc/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/sparc/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/stub/dl-machine.h (elf_machine_runtime_setup): Update
	skeleton definition.

1997-05-22 18:37  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/__math.h (logb): Remove second value placed on
	stack by fxtract.

1997-05-22 17:44  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): Add cast to prevent
	warning.

	* stdlib/seed48_r.c (seed48_r): Include limits.h to get definition
	of USHRT_MAX.

	* locale/localeinfo.h: _nl_current has LC_ALL + 1 elements.

1997-05-21 17:50  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.4.

	* db/Makefile (libdb.so): Depend on libc.so for dynamic loading
	and for Linux ld.so.
	* login/Makefile (libutil.so): Likewise.
	* math/Makefile (libm.so): Likewise.
	* md5-crypt/Makefile (libcrypt.so): Likewise.
	* nis/Makefile (libnss_%.so): Likewise.
	* resolv/Makefile (libnss_dns.so): Likewise.

1997-05-15 16:10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/Makefile (CFLAGS-s_copysignl.c): Define for gcc bug
	workaround.

1997-05-21 01:52  Ulrich Drepper  <drepper@cygnus.com>

	* locale/Makefile (CPPFLAGS): Add definition for LOCALE_ALIAS_PATH.

	* malloc/obstack.c: Include <config.h>.  Include <stdlib.h> only
	if __GNU_LIBRARY__ or HAVE_STDLIB_H is defined.
	Reported by Ian Taylor <ian@cygnus.com>.

	* manual/errno.texi: Remove ENOMEDIUM and EMEDIUMTYPE errors.

	* po/de.po: Updated.

	* stdlib/seed48_r.c: Also reset `a' and `c' to default values.

	* sysdeps/unix/sysv/linux/shmdt.c: Add cast in call to __ipc.

1997-05-15 13:14  Miles Bader  <miles@gnu.ai.mit.edu>

	Changes by Thomas Bushnell <thomas@gnu.ai.mit.edu>:
	* hurd/hurdauth.c (_S_msg_add_auth): Implement correctly.

1997-05-12 14:50  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* hurd/hurdsig.c (_hurdsig_init): Double size of sigthread stack;
	msg_add_auth was overflowing it.

1997-05-12 02:28  Ulrich Drepper  <drepper@cygnus.com>

	* time/sys/time.h: Make second argument of setitimer const.
	Patch by Michael Deutschmann <ldeutsch@mail.netshop.net>.
	* sysdeps/stub/setitimer.c: Likewise.
	* sysdeps/mach/hurd/setitimer.c: Likewise.

1997-05-12 21:20  Richard Henderson  <rth@tamu.edu>

	* elf/dl-lookup.c (_dl_lookup_symbol_skip): Call _dl_signal_error
	when we can't find the symbol.

1997-05-12 16:54  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c: Fix handling of 32-bit Windog environments.
	Patch by Arnold Robbins <arnold@skeeve.atl.ga.us>.

1997-05-10 23:26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/syscalls.list: Add cacheflush.

1997-05-08 07:53  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/unix/sysv/linux/poll.c: Save errno.

1997-05-08 16:44  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add nfsservctl.

1997-05-07 20:27  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sys/ttydefaults.h: Removed.

1997-05-07 14:10  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* termios/sys/ttydefaults.h: Delete file.
	* sysdeps/generic/sys/ttydefaults.h: New file; use OXTABS in
	TTYDEF_OFLAG.
	* sysdeps/unix/bsd/sun/sunos4/sys/ttydefaults.h: New file; use
	XTABS in TTYDEF_OFLAG.
	* sysdeps/unix/sysv/linux/sys/ttydefaults.h: New file; use XTABS
	in TTYDEF_OFLAG (which is correct for all existing Linux ports).

1997-05-07 16:31  Ulrich Drepper  <drepper@cygnus.com>

	* posix/TESTS: Add some more tests for character class matching.
	* posix/regex.c: Merge with GNU awk version.
	(regex_compile): Use ISO C/amend 1 functions for character class
	handling.
	* posix/regex.h: Merge with GNU awk version.

	* posix/getopt.c: Declare as master copies.
	* posix/getopt1.c: Likewise.
	* posix/getopt.h: Likewise.

	* sysdeps/unix/sysv/linux/sys/mount.h: Add definitions for option
	value to mount functions.
	Patch by a sun <asun@zoology.washington.edu>.

1997-05-06 13:25  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sunrpc/svc_run.c (svc_exit): New, defined.
	(svc_run): Test for svc_stop variable.
	* sunrpc/rpc/svc.h (svc_exit): New, declared.

1997-05-03 22:24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/libm-ieee754/e_acoshl.c: Fix test for x < 1.

	* sysdeps/libm-ieee754/e_atan2l.c: Ignore integer bit for Inf and
	NaN.  Fix test for sign of infinite y.

	* sysdeps/libm-ieee754/e_atanhl.c: Fix sign of result.

	* sysdeps/libm-ieee754/e_sinhl.c: Fix test for sign of argument.

1997-05-05 14:22  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* hurd/hurdsig.c (_hurdsig_preemptors): Provide initialization.
	* hurd/hurdfault.c (_hurdsig_fault_preemptor): Likewise.

1997-05-01 03:13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): For Linux-2.0 and up the
	kernel can return negative values.  Only fail when return value is
	in range in range which is never returned as valid address.
	Patch by Bruno Haible <haible@ilog.fr>.

1997-04-30 17:35  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/random_r.c (__srandom_r): Don't use seed 0.  Use 1 in this
	case.

	* time/strftime.c (add): Respect `0' padding flag.
	Reported by Richard Stallman <rms@gnu.ai.mit.edu>.

1997-05-01 20:02  Richard Henderson  <rth@tamu.edu>

	* sysdeps/unix/sysv/linux/alpha/brk.S: Don't presume that the kernel
	will preserve non-call-saved registers; save and restore a0 across
	the system call.
	* sysdeps/unix/sysv/linux/alpha/clone.S: Likewise tuck the thread
	data onto the new thread's stack.

1997-04-29 21:06  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Don't set cross-compiling based on $(BUILD_CC) != $(CC).
	* config.make.in: Set cross-compiling from configure result.
	* configure.in: Emit definition of `cross_compiling'.
	Patches by Marcus G. Daniels <marcus@cathcart.sysc.pdx.edu>.

1997-04-29 19:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/e_powf.S Generate invalid exception correctly.
	* sysdeps/libm-i387/e_pow.S: Likewise.
	* sysdeps/libm-i387/e_powl.S: Likewise.

1997-04-27 20:52  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/obstack.h (obstack_specify_allocation_with_arg,
	obstack_chunkfun, obstack_freefun): Fix casts.

1997-04-26 13:37  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip_fw.h: Use <netinet/ip_icmp.h>
	not <netinet/icmp.h>.
	* inet/netinet/tcp.h: Move to...
	* sysdeps/generic/netinet/tcp.h: ...here.
	Reported by Michael Deutschmann <ldeutsch@mail.netshop.net>.

1997-04-25 12:31  Ulrich Drepper  <drepper@cygnus.com>

	* csu/Makefile ($(objpfx)initfini.s): Add CPPFLAGS, CFLAGS and -g0
	to command line of compiler.
	Patch by Marcus G. Daniels <marcus@sysc.pdx.edu>.

	* sysdeps/generic/sigset.h (__sigandset, __sigorset): Fix typos.
	Patch by Marcus G. Daniels <marcus@sysc.pdx.edu>.

	* signal/signal.h (_sys_siglist, sys_siglist): Use _NSIG, not NSIG
	in declaration.
	Patch by Michael Widenius <monty@tcx.se>.

	* time/strptime.c (strptime_internal): Fix %I format specifier
	being off by one.
	Patch by Mark Kettenis <kettenis@phys.uva.nl>.

1997-04-21 16:28  Ulrich Drepper  <drepper@cygnus.com>

	* Net release 2.0.3.

1997-04-21 13:25  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/seed48_r.c: Also reset `a' and `c' to default values.
	* stdlib/srand48_r.c: Likewise.

1997-04-21 13:25  Ulrich Drepper  <drepper@cygnus.com>

	* manual/arith.texi: Add description for INFINITY, _Imaginary_I,
	fpclassify & friends, and complex number operations.
	Update various other math functions for ISO C 9X.
	* manual/math.texi: Update various entries for ISO C 9X.
	Add description for complex number functions.
	Add description of rand48 function family.
	* manual/string.h: Add description of a64l and l64a.

	* math/cmathcalls.h: Fix typo.

	* stdlib/a64l.c: Pretty printing.

	* stdlib/seed48_r.c: Also reset `a' and `c' to default values.
	* stdlib/srand48_r.c: Likewise.

1997-04-20 01:28  Richard Henderson  <rth@tamu.edu>

	* rellns-sh: Handle files in the same directory correctly.

1997-04-20 11:22  Ulrich Drepper  <drepper@cygnus.com>

	* csu/initfini.c: Place ALIGN instruction at correct positions.
	Patch by Richard Henderson <richard@twiddle.rth.home>.

1997-04-19 17:12  Ulrich Drepper  <drepper@cygnus.com>

	* Make-dist: Don't automatically ignore .c files if .S or .s files
	are ignored.

	* csu/Makefile (distribute): Add defs.awk.

1997-04-19 15:39  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/stub/shmat.c: Update to XPG4.2 interface.
	* sysdeps/stub/shmdt.c: Likewise.
	Reported by Thomas Bushnell, n/BSG.

1997-04-18 15:48  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Rename
	sysdeps/sysv/linux/netatalk/atalk.h to .../at.h.
	Remove sysdeps/sysv/linux/netinet/icmp.h.

	* login/utmp.h: Add prototype for updwtmp.
	* login/logwtmp.c: Add new function updwtmp which allows to write
	a complete record to the wtmp file.
	Patch by Miquel van Smoorenburg <miquels@cistron.nl>.

1997-04-18 11:21  Ulrich Drepper  <drepper@cygnus.com>

	* shadow/fgetspent_r.c: Set *RESULT to NULL before returning error.
	Patch by Thorsten Kukuk <kukuk@vt.uni-paderborn.de>.

1997-04-18 02:18  Ulrich Drepper  <drepper@cygnus.com>

	* csu/initfini.c: Rewrite by Zack Weinberg
	<zack@rabi.phys.columbia.edu>.
	* csu/Makefile: Add rules for rewrite.
	* csu/defs.awk: Helper script to generate derived header.

1997-04-16 17:33  Miles Bader  <miles@gnu.ai.mit.edu>

	* login/utmp_file.c (proc_utmp_eq): Only use ut_id field if valid.

1997-04-15 03:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/Dist: Remove old math implementation files.
	* sysdeps/generic/mathimpl.h: Removed.
	* sysdeps/generic/trig.h: Removed.
	* sysdeps/generic/sincos.c: Removed.
	* sysdeps/generic/asincos.c: Removed.
	* sysdeps/generic/exp__E.c: Removed.
	* sysdeps/generic/log__L.c: Removed.

1997-04-13 17:18  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (fREe): Small optimization.  Before returning,
	add fast check whether the heap containing top can go away.

1997-04-11 16:46  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (mALLOc, rEALLOc, cALLOc, mEMALIGn): When
	failing to allocate a new chunk, also try the main_arena.  It may
	be that we are only running out of mmapped regions, and other
	arenas cannot be enlarged sufficiently.
	(new_heap, malloc_extend_top): Handle top_pad more consistently,
	i.e. only in new_heap().

1997-04-13 01:06  Ulrich Drepper  <drepper@cygnus.com>

	* time/strftime.c (memset_space): Increment pointer.
	* time/strptime.c: Interpret year number 00-59 as 2000--2059.
	Patches by Karl Heuer <kwzh@gnu.ai.mit.edu>.

1997-04-11 11:27  Ulrich Drepper  <drepper@cygnus.com>

	* rellnsh-sh: Use explicitely /bin/pwd to find the external program.

	* sysdeps/libm-ieee754/s_ceill.c: Corrected.  The mantissa has only
	63 bits.
	* sysdeps/libm-ieee754/s_floorl.c: Likewise.

	* po/pl.po: Updated.

	* string/swab.c: Correctly handle array of odd length.

	* manual/string.texi: Correct prototype in memmem documentation.

1997-04-03 10:18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile (dir-add.texi): Simplify.

1997-04-09 01:24  Ulrich Drepper  <drepper@cygnus.com>

	* rellns-sh: Rewrite to work also in presence of symlinks.

	* locale/setlocale.c (_nl_current): Add element with index LC_ALL.
	Reported by Greg McGary <gkm@eng.ascend.com>.

	* manual/libc.texinfo: Update malloc documentation for new malloc.
	* manual/memory.texi: Likewise.
	Patch by Wolfram Gloger <wmglo@dent.med.uni-muenchen.de>.

	* stdlib/erand48_r.c (erand48_r): Build double value using
	ieee754_double union and use random bits in different order to
	increase effect of seed.
	Reported by David Mosberger-Tang <davidm@AZStarNet.com>.

1997-04-08 07:19  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/genops.c (_IO_flush_all_linebuffered): Don't flush on
	a read-only stream.

1997-04-09 01:19  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (mALLOC_STATs) [MALLOC_DEBUG>1]: Put declaration
	in correct place.
	Patch by Marcus G. Daniels <marcus@cathcart.sysc.pdx.edu>.

1997-04-06 11:32  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* posix/getopt.c (_getopt_initialize): Preserve optind.
	(_getopt_internal): Set optind to 1 if optind == 0 before
	calling _getopt_initialize ().

1997-03-27 07:37  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/fileops.c (_IO_file_overflow): Set error when try to write
	on a read-only stream.

	* sysdeps/gnu/utmpbits.h (ut_xtime): New symbol.
	(ut_time): Define it only if _NO_UT_TIME is not defined.

1997-04-05 16:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netatalk/at.h: Include <sys/socket.h> to
	get definition of sa_family_t for <linux/atalk.h>.
	Reported by a sun <asun@zoology.washington.edu>.

	* malloc/malloc.c (cALLOc): Little optimization.

1997-04-05 03:11  Ulrich Drepper  <drepper@cygnus.com>

	* inet/arpa/inet.h: Rewrite.  Don't use the ugly BSD way to write
	headers but instead add comments and parameter names.
	Don't use BSD specific types in prototypes.

	* manual/nss.texi: Correct a few typos and errors.

1997-03-25 09:38  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/termbits.h (OXTABS): Don't define.
	* sysdeps/unix/sysv/linux/alpha/termbits.h (OXTABS): Likewise.

	* termios/sys/ttydefaults.h (TTYDEF_OFLAG): Use either OXTABS or
	TAB3, if one of them is defined.

1997-03-24 19:58  Richard Henderson  <rth@tamu.edu>

	* stdlib/tst-strtol.c (tests): Correct 64-bit entry.

1997-03-25 02:15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/setenv.c [_LIBC]: Define __clearenv and make
	clearenv a weak alias.

	* sysdeps/unix/sysv/linux/iovec.h: Don't use kernel header because
	of type clashes.  Add all definitions here.

	* sysdeps/unix/sysv/linux/shmat.c: Likewise.  Correct types according
	to XPG4.2.
	* sysdeps/unix/sysv/linux/shmdt.c: Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c: Likewise.

	* sysvipc/sys/shm.h (shmat, shmdt): Correct types.

	* sysdeps/unix/sysv/linux/sys/kd.h: Define _LINUX_TYPES_H to avoid
	use of kernel types.

1997-03-25 00:00  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip.h (struct ip_timestamp):
	Correct typos.  Reported by a sun <asun@zoology.washington.edu>.

1997-03-20 14:46  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig (all): Make sure this is always the default goal.

1997-03-24 23:14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/huge_val.h: Remove references to byte order macros.
	Don't include <endian.h>.

1997-03-19 15:18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>
	* sysdeps/m68k/huge_val.h: Remove references to byte order macros.
	Don't include <endian.h>.

1997-03-24 23:09  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (iruserok): Use access instead of euidaccess.

1997-03-24 15:31  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Use AC_PROG_CC instead of AC_PROG_TOOL to find
	compiler.

1997-04-10 20:22  Ulrich Drepper  <drepper@cygnus.com>

	* hurd/Makefile (sunrpc-headers): Add clnt.h.
	Proposed by Thomas Bushnell <thomas@gnu.ai.mit.edu>.

1997-03-24 02:34  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/s_finitel.c (__finitel): Shift return value
	by 31 positions to get 0/1 result.
	Patch by Joe Keane <jgk@jgk.org>.

1997-03-23 12:15  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* posix/getopt.c (__getopt_nonoption_flags): Make it extern
	to prevent from ld linking in getopt.o even if there is another
	incompatible one.

	* posix/getopt_init.c (__getopt_nonoption_flags): Remove extern.

1997-03-20 20:22  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* Makerules (depfiles): Remove $(test-srcs).

1997-03-27 07:37  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/fileops.c (_IO_file_overflow): Set error when try to write
	on a read-only stream.

	* sysdeps/gnu/utmpbits.h (ut_xtime): New symbol.
	(ut_time): Define it only if _NO_UT_TIME is not defined.

1997-04-03 19:24  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/unix/sysv/linux/sigset.h (__sigisemptyset): Fix a
	typo.

1997-04-02 16:55  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile: Add rule to easily generate dir-add.texi file.
	* manual/Makefile: Likewise.

1997-04-01 10:11  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=inet]
	(sysdep_headers): Remove netinet/icmp.h.

1997-04-02 16:28  Ulrich Drepper  <drepper@cygnus.com>

	* grp/fgetgrent.c: Don't use fixed buffer length.  Allow dynamic
	adjustment if the underlying function say it is too small.
	* pwd/fgetpwent.c: Likewise.
	* shadow/fgetspent.c: Likewise.
	* shadow/sgetspent.c: Likewise.

	* grp/fgetgrent_r.c (__fgetgrent_r): If `parse_result' returns -1
	this means there was not enough room for the gr_mem array.

	* nss/nss_files/files-XXX.c: Leave loop and return error if
	`parse_result' returns -1.

	* nss/nss_files/files-parse.c (parse_line): Return -1 if parsing
	of trailing list fails because of low memory.
	(parse_list): Rewrite.  The logic was completly incorrect since
	the checks for overflowing the array were not executed when
	needed.

	* shadow/sgetspent_r.c: Only a return value > 0 from parse_line
	signals success.

	* nss/getXXbyYY.c: Make sure NULL is returned if we ran out of memory.
	* nss/getXXent.c: Likewise.

1997-04-02 13:56  Ulrich Drepper  <drepper@cygnus.com>

	* manual/errno.texi: Add description of strerror_r.

1997-04-01 19:07  H.J. Lu (hjl@gnu.ai.mit.edu)

	* manual/errno.texi: Add ENOMEDIUM and EMEDIUMTYPE.

1997-04-02 13:55  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/gnu/errlist.awk: The Texinfo file is named errno.texi.

1997-03-28 20:56  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdlib/stdlib.h: Declare __clearenv.

1997-03-28 18:03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/libm-ieee754/s_asinhl.c: Fix Ulrich Dreppers mangling of
	the last change.

1997-03-28 17:55  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* configure.in: Call AC_CANONICAL_BUILD before referencing
	$build.  Fix test for BUILD_CC.

1997-04-01 14:08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/memset.c: Fix typo.
	* sysdeps/stub/fchmod.c: Fix typo.
	* sysdeps/stub/fchdir.c: Fix typo.
	Reported by Fila Kolodny <fila@ibi.com>.

	* time/time.h (strftime): Remove __restrict in declaration.

1997-04-01 00:37  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/asm-syntax.h: Define `L' macro to emit correct
	syntax for local label.
	* sysdeps/i386/add_n.S: Use correct local label syntax for the
	binary format.
	* sysdeps/i386/addmul_1.S: Likewise.
	* sysdeps/i386/lshift.S: Likewise.
	* sysdeps/i386/memchr.S: Likewise.
	* sysdeps/i386/memcmp.S: Likewise.
	* sysdeps/i386/mul_1.S: Likewise.
	* sysdeps/i386/rshift.S: Likewise.
	* sysdeps/i386/stpcpy.S: Likewise.
	* sysdeps/i386/stpncpy.S: Likewise.
	* sysdeps/i386/strchr.S: Likewise.
	* sysdeps/i386/strcspn.S: Likewise.
	* sysdeps/i386/strlen.S: Likewise.
	* sysdeps/i386/strpbrk.S: Likewise.
	* sysdeps/i386/strrchr.S: Likewise.
	* sysdeps/i386/strspn.S: Likewise.
	* sysdeps/i386/strtok.S: Likewise.
	* sysdeps/i386/sub_n.S: Likewise.
	* sysdeps/i386/submul_1.S: Likewise.
	* sysdeps/i386/i486/strcat.S: Likewise.
	* sysdeps/i386/i486/strlen.S: Likewise.
	* sysdeps/i386/i586/add_n.S: Likewise.
	* sysdeps/i386/i586/addmul_1.S: Likewise.
	* sysdeps/i386/i586/lshift.S: Likewise.
	* sysdeps/i386/i586/memset.S: Likewise.
	* sysdeps/i386/i586/mul_1.S: Likewise.
	* sysdeps/i386/i586/rshift.S: Likewise.
	* sysdeps/i386/i586/strchr.S: Likewise.
	* sysdeps/i386/i586/strlen.S: Likewise.
	* sysdeps/i386/i586/sub_n.S: Likewise.
	* sysdeps/i386/i586/submul_1.S: Likewise.

	* time/africa: Updated from ADO tzdata1997e.
	* time/antarctica: Likewise.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/europe: Likewise.
	* time/northamerica: Likewise.
	* time/southamerica: Likewise.
	* time/private.h: Updated from ADO tzcode1997d.
	* time/scheck.c: Likewise.

1997-03-31 02:28  Ulrich Drepper  <drepper@cygnus.com>

	* inet/inet_ntoa.c (inet_ntoa): Complete rewrite.  Now uses
	thread-specific memory in multi-threaded programs.

	* sysdeps/unix/sysv/linux/netatalk/atalk.h: Rename to...
	* sysdeps/unix/sysv/linux/netatalk/at.h: ...this.
	Suggested by a sun <asun@zoology.washington.edu>.

1997-03-30 14:53  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip_icmp.h: Add former contents
	of <netinet/icmp.h>.
	Patch by a sun <asun@zoology.washington.edu>.

1997-03-29 17:39  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/bug5.c: Clear LD_LIBRARY_PATH environment variable
	before using system.
	* stdio-common/test-popen.c: Clear LD_LIBRARY_PATH environment variable
	before using popen.

1997-03-27 02:28  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rexec.c: Make string parameters `const'.
	* resolv/netdb.h: Add prototypes for rcmd, rexec, ruserok, and
	rresvport.

	* posix/glob.h: Add declaration for glob_pattern_p.
	* posix/glob.c: Rename glob_pattern_p to __glob_pattern_p and
	make glob_pattern_p a weak alias.  This function is used in other
	packages (e.g. bash).

	* signal/Makefile (routines): Add sigisempty, sigandset, and
	sigorset.
	* signal/signal.h: Add prototypes for sigisempty, sigandset, and
	sigorset.
	* signal/sigisempty.c: New file.
	* signal/sigandset.c: New file.
	* signal/sigorset.c: New file.
	* sysdeps/generic/sigset.h: Define __sigisemptyset, __sigandset,
	and __sigorset.
	* sysdeps/unix/sysv/linux/sigset.h: Likewise.

	* sysdeps/unix/sysv/linux/netinet/icmp.h: Remove since we have
	ip_icmp.h.  Reported by HJ Lu.

1997-03-25 03:48  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* grp/grp.h: Include <stddef.h> only once.

1997-03-20 17:56  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.3.

1997-03-25 23:09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (BUILD_CFLAGS): Fix reference to config file.

1997-03-26 04:53  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c (next_brace_sub): Decrement depth counter when '}'
	is found.
	Patch by Dennis Henriksen <opus@flamingo.osrl.dk>.

1997-03-22 04:53  Ulrich Drepper  <drepper@cygnus.com>

	* Net release 2.0.2.

1997-03-22 04:37  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/termbits.h (OXTABS): Define as alias for
	XTABS.
	* sysdeps/unix/sysv/linux/alpha/termbits.h (OXTABS): Likewise.
	* termios/sys/ttydefaults.h: Partly revert patch by Andreas Schwab
	of Sun Dec 15 16:33:44 1996.
	Proposed by Thomas Bushnell <thomas@gnu.ai.mit.edu>.

1997-03-21 20:55  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (distribute): Add BUGS.

	* sysdeps/generic/machine-gmon.h: Update copyright.

	* sysdeps/i386/Makefile [$(subdir)=gmon] (sysdep_routines): Add
	i386-mcount.
	* sysdeps/i386/dl-machine.h [PROF] (_dl_runtime_resolve): Don't
	use regparam mechanism for call of `fixup' call.
	* sysdeps/i386/Dist: New file.
	* sysdeps/i386/i386-mcount.S: New file.  `mcount' entry point.
	* sysdeps/i386/machine-gmon.h: New file.  i386 specific version
	of gmon definitions.

1997-03-20 13:39  Andreas Jaeger  <aj@arthur.pfalz.de>

	* stdlib/tst-strtol.c (main): Save the value of errno since printf
	may modify it, use the saved errno everywhere.
	* stdlib/tst-strtod.c (main): Likewise.

1997-03-21 05:54  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c (glob): Fix completely broken handling of
	GLOB_BRACE and partly broken handling of GLOB_TILDE.
	Reported by Dennis Henriksen <opus@flamingo.osrl.dk>.

1997-03-20 20:22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/readv.c: Don't emulate readv with small
	UIO_FASTIOV value by multiple readv calls since we need atomicity.
	* sysdeps/unix/sysv/linux/writev.c: Likewise.
	Reported by Matthis Urlichs.

1997-03-20 04:34  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.S (CALL_MCOUNT): Clear this
	macro so ENTRY(__syscall_error) doesn't insert a call to _mcount,
	which clobbers %eax.

	* Makeconfig [$(elf)=yes] (+prector, +postctor): New variables for
	crtbegin.o/crtend.o, using gcc to find them.
	(+link): Use them.

1997-03-20 00:06  Richard Henderson  <rth@tamu.edu>

	* gmon/sys/gmon.h: Revert the bulk of the 960930 changes, as they
	affect the alignment, and therefore the end padding of the structs.
	Reported by David Mosberger <davidm@azstarnet.com>.
	* gmon/gmon.c: Declare the variables with aligned tags to compensate.
	Use __writev instead of write for the I/O.

	* misc/sys/uio.h: Declare __writev and __readv.
	* sysdeps/posix/readv.c: Rename and alias readv to __readv.
	* sysdeps/posix/writev.c: Likewise for writev.
	* sysdeps/stub/readv.c: Likewise.
	* sysdeps/stub/writev.c: Likewise.
	* sysdeps/unix/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/readv.c: Likewise.
	* sysdeps/unix/sysv/linux/writev.c: Likewise.

	* stdlib/testdiv.c: Exit with error status when we have an error.
	* sysdeps/alpha/div.S: Initialize `quotient' and `mask'.
	* sysdeps/alpha/ldiv.S: Likewise.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Include ctype.h for isdigit.

1997-03-20 04:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/stub/msync.c (msync): Add parameter `flags' to match
	generic prototype.

	* sysdeps/libm-ieee754/w_pow.c: Add definition for `signbit' function.
	Future releases will have this function.
	* sysdeps/libm-ieee754/w_powf.c: Likewise.
	* sysdeps/libm-ieee754/w_powl.c: Likewise.
	Reported by HJ Lu.

1997-03-20 01:49  Ulrich Drepper  <drepper@cygnus.com>

	* setjmp/setjmp.h: Change references of ANSI C to ISO C.
	* sysdeps/i386/bsd-_setjmp.S: Correct fatal bug in jump to
	`__sigsetjmp' in PIC code.
	* sysdeps/i386/bsd-setjmp.S: Likewise.

	* sysdeps/libm-i387/e_pow.S: Correct recognition of mantissa
	overflow.
	* sysdeps/libm-i387/e_powf.S: Likewise.
	* sysdeps/libm-i387/s_expm1.S: Handle x == +-0 as a special
	case since expm1(-0) == -0.
	* sysdeps/libm-i387/s_expm1f.S: Likewise.
	* sysdeps/libm-i387/s_expm1l.S: Likewise.
	* sysdeps/libm-ieee754/s_modf.c: Optimize code by avoiding unneeded
	access to FP number.
	* sysdeps/libm-ieee754/s_modff.c: Likewise.
	* sysdeps/libm-ieee754/s_modfl.c: Correct former completely bogus
	code.  It never worked correctly.
	* sysdeps/libm-ieee754/s_tanh.c: Handle x == +-0 as a special
	case since tanh(-0) == -0.
	* sysdeps/libm-ieee754/s_tanhf.c: Likewise.
	* sysdeps/libm-ieee754/s_tanhl.c (__tanhl): Correct handling of -inf.

1997-03-19 21:13  Ulrich Drepper  <drepper@cygnus.com>

	* time/Makefile: Correct dependencies for test-tz.

	* sysdeps/unix/sysv/linux/writev.c: Don't use MAX_IOVEC.  Test for
	UIO_FASTIOV and set to 8 if not available.
	* sysdeps/unix/sysv/linux/readv.c: Likewise.
	Patch by HJ Lu.

	* sysdeps/unix/sysv/linux/xstat.c: Include <kernel_stat.h>, not
	"kernel_stat.h".
	* sysdeps/unix/sysv/linux/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/fxstat.c: Likewise.
	Reported by fabsoft@fabsoft2.zarm.uni-bremen.de.

1997-03-19 01:40  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/sco3.2.4/Dist: New file.

	* sysdeps/unix/sysv/sysv4/Dist: Add __getpgid.c and __setpgid.c.

	* sysdeps/unix/bsd/Dist: Add bsdstat.h, setrguid.c, and setruid.c.

	* sysdeps/unix/sysv/Dist: Add direct.h.

	* sysdeps/unix/sysv/linux/Dist: Add netinet/tcp.h.

	* Make-dist ($(tardir).tar): Prefer writing temporary file to
	$TMPDIR is available.  The default is /tmp.

	* sysdeps/generic/ip.h: Move to...
	* sysdeps/generic/netinet/ip.h: ...here.

	* sysdeps/i386/setjmp.S (__setjmp): Fix fatal bug where 0 argument
	is placed in wrong place on the stack.
	Reported by Marc Lehmann <mlehmann@hildesheim.sgh-net.de>.

1997-03-18 23:18  Ulrich Drepper  <drepper@cygnus.com>

	* time/offtime.c (__offtime): Change type of `yg' to long int.
	Reported by a sun <asun@zoology.washington.edu>.

1997-03-18 23:09  a sun  <asun@zoology.washington.edu>

	* sysdeps/unix/sysv/linux/net/if_ppp.h (PPP_VERSION): Define to
	2.2.0 to prevent version mismatch.

1997-03-09 12:36  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* Make-dist (srcs): Add $(test-srcs).
	* MakeTAGS (all-sources): Likewise.
	* Makerules (depfiles, common-mostlyclean): Likewise.
	* Rules (tests): Likewise.

1997-03-18 05:28  Roland McGrath  <roland@frob.com>

	* elf/dl-reloc.c (RESOLVE): Don't try to resolve local symbols.

1997-03-17 21:39  Philip Blundell  <phil@london.uk.eu.org>

	* nis/nss_nis/nis-service.c (_nss_nis_getservbyname_r): Allow
	protocol=NULL to match any protocol rather than returning an
	error.

1997-03-17 19:00  Philip Blundell  <phil@london.uk.eu.org>

	* nss/nss_files/files-service.c (servbyname): Match any protocol
	if proto==NULL.

1997-03-18 05:15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/fcntlbits.h: Don't define O_NORW.
	* sysdeps/unix/sysv/linux/fcntlbits.h: Likewise.
	Proposed by Thomas Bushnell, n/BSG.

1997-03-18 07:53  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/generic/setenv.c (setenv): Don't copy name when we reuse
	the buffer for replacement.

1997-03-16 19:30  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sysdeps/unix/sysv/linux/syscalls.list: Add sys_fstat,
	sys_lstat and sys_stat.

1997-03-17 12:52  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* mach/devstream.c (output/write_some): Don't try and write more
	than IO_INBAND_MAX in a single call to device_write_inband.

1997-03-17 04:00  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/w_atan2.c: Don't ignore exception if library
	type is SVID.
	* sysdeps/libm-ieee754/w_atan2f.c: Likewise.
	* sysdeps/libm-ieee754/w_atan2l.c: Likewise.

	* sysdeps/unix/sysv/linux/sys/mman.h (msync): Add description for
	FLAGS parameter.

1997-03-16 18:43  Ulrich Drepper  <drepper@cygnus.com>

	* manual/filesys.texi: Add documentation for scandir and alphasort.
	* manual/examples/dir2.c: New example for scandir.

	* sysdeps/i386/huge_val.h: New file.  ix87 specific infinity values.
	* sysdeps/m68k/huge_val.h: New file.  m68k specific infinity values.
	* sysdeps/ieee754/huge_val.h: Remove definition of long double
	definition.  Make it the same as the double definition.

	* sysdeps/libm-i387/e_acos.S: Fix bug in FPU stack handling.
	* sysdeps/libm-i387/e_acosf.S: Likewise.
	* sysdeps/libm-i387/e_acosl.S: Likewise.
	* sysdeps/libm-i387/e_asin.S: Likewise.
	* sysdeps/libm-i387/e_asinf.S: Likewise.
	* sysdeps/libm-i387/e_asinl.S: Likewise.
	* sysdeps/libm-i387/e_exp.S: Likewise.
	* sysdeps/libm-i387/e_expf.S: Likewise.
	* sysdeps/libm-i387/e_expl.S: Likewise.
	* sysdeps/libm-i387/s_scalbn.S: Likewise.
	* sysdeps/libm-i387/s_scalbnf.S: Likewise.
	* sysdeps/libm-i387/s_scalbnl.S: Likewise.

	* sysdeps/libm-i387/e_log.S: Optimize branch code.
	* sysdeps/libm-i387/e_logf.S: Likewise.
	* sysdeps/libm-i387/e_logl.S: Likewise.
	* sysdeps/libm-i387/e_log10.S: Likewise.
	* sysdeps/libm-i387/e_log10f.S: Likewise.
	* sysdeps/libm-i387/e_log10l.S: Likewise.

	* sysdeps/libm-i387/e_pow.S: Major rewrite to handle special cases.
	* sysdeps/libm-i387/e_powf.S: Likewise.
	* sysdeps/libm-i387/e_powl.S: Likewise.

	* sysdeps/libm-i387/s_expm1.S: Change return value for -inf
	argument to -1.0.
	* sysdeps/libm-i387/s_expm1f.S: Likewise.
	* sysdeps/libm-i387/s_expm1l.S: Likewise.

	* sysdeps/libm-i387/s_isinfl.c: Return -1 for -inf.

	* sysdeps/libm-i387/s_logbl.S: Correct return value.  Discard first
	stack element after fxtract.

	* sysdeps/libm-ieee754/e_atan2l.c: New file.  `long double'
	implementation for atan2 function.

	* sysdeps/libm-ieee754/k_standard.c: Return NAN for libm not in
	_SVID_ mode when acos, asin, atan2, log, log10 is called with
	argument out of range.
	Add new error case for pow(+0,neg).

	* sysdeps/libm-ieee754/s_isinf.c: Rewrite to return -1 for -inf.
	* sysdeps/libm-ieee754/s_isinff.c: Likewise.
	* sysdeps/libm-ieee754/s_isinfl.c: Likewise.

	* sysdeps/libm-ieee754/s_scalbnl.c (huge, tiny): Adapt values for
	long double type.

	* sysdeps/libm-ieee754/w_atan2.c: Do not raise exception expect when
	in SVID mode.
	* sysdeps/libm-ieee754/w_atan2f.c: Likewise.
	* sysdeps/libm-ieee754/w_atan2l.c: Likewise.

	* sysdeps/libm-ieee754/w_pow.c: Distinguish error cases for x is +0
	or -0.
	* sysdeps/libm-ieee754/w_powf.c: Likewise.
	* sysdeps/libm-ieee754/w_powl.c: Likewise.

	* sysdeps/posix/isfdtype.c: Add cast to prevent warning.

	* sysdeps/stub/fcntlbits.h: Update copyright.
	* sysdeps/unix/bsd/fcntlbits.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/fcntlbits.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/fcntlbits.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/fcntlbits.h: Likewise.
	* sysdeps/unix/common/fcntlbits.h: Likewise.
	* sysdeps/unix/sysv/fcntlbits.h: Likewise.  Define O_FSYNC as alias
	of O_SYNC.  Add BSD compatibility macros FAPPEND, FFSYNC, FNONBLOCK,
	and FNDELAY.
	* sysdeps/unix/sysv/irix4/fcntlbits.h: Likewise.

	* sysdeps/unix/readdir_r.c: Don't copy whole `struct dirent' record,
	only reclen bytes.

	* sysdeps/unix/sysv/linux/fcntlbits.h [__USE_GNU]: Add O_READ, O_WRITE
	and O_NORW.
	* sysdeps/unix/sysv/linux/alpha/fcntlbits.h: Likewise.

	* sysdeps/unix/sysv/linux/init-first.h: Add copyright.

	* sysdeps/unix/sysv/linux/fxstat.c: New file.  Rewrite kernel-level
	struct stat to user-level form.
	* sysdeps/unix/sysv/linux/lxstat: New file.
	* sysdeps/unix/sysv/linux/xstat: New file.
	* sysdeps/unix/sysv/linux/kernel_stat.h: Define struct stat used in
	kernel.
	* sysdeps/unix/sysv/linux/statbuf.h (struct stat): Change definition
	to use prescribed types for elements.
	(_STAT_VER): Change to value 3.
	* sysdeps/unix/sysv/linux/alpha/statbuf.h: Likewise.
	* sysdeps/unix/sysv/linux/Dist: Add kernel_stat.h.
	* sysdeps/unix/sysv/linux/alpha/Dist: Likewise.

	* time/Makefile: Correct dependencies for test-tz.

	* sysdeps/generic/sys/mman.h (msync): Add third parameter.

1997-03-16 15:02  a sun  <asun@zoology.washington.edu>

	* sysdeps/unix/sysv/linux/net/if_ppp.h: Don't use incompatible
	kernel header.
	* sysdeps/unix/sysv/linux/net/ppp_defs.h: Likewise.

1997-03-14 17:15  Ulrich Drepper  <drepper@cygnus.com>

	* db/hash/hash_bigkey.c (__big_delete): Don't call __free_ovflpage
	without testing for last_bfp to be NULL.
	Reported by fabsoft@fabserver1.zarm.uni-bremen.de.

1997-03-14 04:00  Kurt Garloff  <garloff@kg1.ping.de>

	* sysdeps/unix/sysv/linux/fcntlbits.h (O_FSYNC): Make alias for O_SYNC.
	(FASYNC): Move to __USE_BSD section.  Create new macro O_ASYNC.

1997-03-14 02:50  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nis/nis-hosts.c (_nss_nis_gethostbyname2_r): New
	functions.  Compare result for correct address type.
	(_nss_nis_gethostbyname_r): Use _nss_nis_gethostbyname2_r.
	* nss/nss_files/files-hosts.c: Likewise.
	Reported by Mirko Streckenbach <mirko@marian.hil.de>.

1997-02-17 01:40  Zlatko Calusic  <zcalusic@srce.hr>

	* time/strptime.c (recursive): Return rp to caller.
	(strptime_internal): First check for long names, then abbreviated
	(month & weekday).

1997-03-11 17:00  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/strptime.c (strptime_internal) [case 'Y']: Always subtract
	1900 from year, regardless of century.

1997-03-12 05:43  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strtod.c (_tens_in_limb) [BITS_PER_MP_LIMB > 32]: Make
	all numbers unsigned to make buggy gccs happy.
	Patch by Bryan W. Headley <bheadley@interaccess.com>.

	* sysdeps/unix/sysv/linux/netinet/ip.h: Add backward-compatibility
	definitions.  Patch by a sun <asun@zoology.washington.edu>.
	Pretty print header.

	* Makerules (build-shlib): Also create symlink if library is versioned.
	Based on a patch by H.J. Lu <hjl@gnu.ai.mit.edu>.
	Remove special rule to libc.so symlink.

1997-03-11 22:39  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/k_standard.c (__kernel_standard): Correct
	return values for acos, asin, and atan2.
	Reported by Andreas Jaeger <aj@arthur.pfalz.de>.

1997-03-10 18:16 Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c (__yp_bind): Fix possible buffer overflow.

1997-03-10 18:06  Bernd Schmidt  <crux@Pool.Informatik.RWTH-Aachen.DE>

	* dirent/alphasort.c (alphasort): Interpret arguments as pointers
	to pointers to directory entries so that alphasort really can be
	used as argument for scandir.

1997-03-09 23:33  Andreas Jaeger  <aj@arthur.pfalz.de>

	* string/strdup.c: Declare memcpy if !(_LIBC || STDC_HEADERS)
	instead of strcpy.

1997-03-10 03:34  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/catgets.c (catopen): Always add NLSPATH to search path for
	catalogs, not only if the envvar NLSPATH is not available.
	Reported by Andries.Brouwer@cwi.nl.

1997-03-10 02:46  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (localtime-file): Don't define using installation
	directory.
	(inst_localtime-file): New variable.
	* time/Makefile (installed-localtime-file): Use inst_localtime-file.
	Reported by Edward Seidl <seidl@janed.com>.

1997-03-10 02:31  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* time/Makefile: Add source files to dependencies for test data.

1997-03-09 22:53  Thorsten Kukuk  <kukuk@weber.uni-paderborn.de>

	* nis/nss_nis/nis-ethers.c: Don't ignore return value of yp_all.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.

1997-03-20 20:44  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/euidaccess.c: Define as __euidaccess and make
	euidaccess weak alias.

1997-03-07 10:30  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* sysdeps/generic/netinet/in.h: Include <sys/types.h>.

	* sysdeps/generic/sys/mman.h (msync): Mention third arg.

1997-03-05 10:40  Thomas Bushnell, n/BSG  <thomas@gnu.ai.mit.edu>

	* hurd/hurd.h (vpprintf): Include <stdarg.h>.  New declaration.

	* hurd/set-host.c (_hurd_set_host_config): Cast second arg to
	__file_name_split.

	* mach/mach_error.c (mach_error_string_int): Give full prototype.
	* mach/errstring.c (mach_error_string_int): Likewise.
	* mach/error_compat.c (__mach_error_map_compat): Likewise.
	* hurd/vpprintf.c (pwrite, vpprintf): Likewise.
	* stdio/vasprintf.c (vasprintf): Likewise.

	* mach/mach/mach_traps.h: Include <mach/kern_return.h>.

	* mach/spin-solid.c: Include <mach/mach_traps.h>.
	* mach/spin-solid.c (__spin_lock_solid): Provide arg to
	swtch_pri.

	* mach/mach_init.c: Include <mach/mig_support.h>.

	* mach/mach_error.h (mach_error_string, mach_error,
	mach_error_type): Always provide prototypes.

	* mach/mach/error.h (mach_error_fn_t): Comment out declaration; it
	appears to be entirely unused dead code.

1997-03-02 13:38  Miles Bader  <miles@gnu.ai.mit.edu>

	* string/argz.h (__need_error_t): New macro, before including <errno.h>
	[!__const] (__const): New macro.
	[!__error_t_defined] (error_t): New typedef.

1997-03-09 06:59  Ulrich Drepper  <drepper@cygnus.com>

	* posix/unistd.h: Add prototype for __euidaccess.
	* sysdeps/posix/euidaccess.c: Define as __euidaccess and make
	euidaccess weak alias.
	* sysdeps/stub/euidaccess.c: Likewise.
	* inet/rcmd.c: Use __ protected versions of non-standard functions.

	* locale/programs/localedef.c: Don't use LOCALE_PATH to find
	binary locale files.  Use LOCALEDIR only.
	* locale/programs/locfile.c: When named file not found and not
	absolute use path in I18NPATH.

	* sysdeps/generic/socketbits.h: Add PF_FILE as synonym for PF_LOCAL
	and AF_FILE as synonym for AF_LOCAL.
	* sysdeps/unix/sysv/linux/socketbits.h: Likewise.

	* time/Makefile: Rewrite rules for test to handle parallel builds.

1997-03-09 05:26  Ulrich Drepper  <drepper@cygnus.com>

	* manual/startup.texi (EXIT_FAILURE): Fix typo.  Patch by
	robbe@orcus.priv.at.

1997-03-09 05:10  Edward Seidl  <seidl@janed.com>

	* sysdeps/i386/elf/start.S (nofini): *Really* align stack to
	8-byte boundary.

1997-03-09 01:48  Ulrich Drepper  <drepper@cygnus.com>

	* elf/link.h: Include <features.h>.
	Patch by Andreas Jaeger  <aj@arthur.pfalz.de>.

1997-03-08 21:48  Thorsten Kukuk  <kukuk@tk.uni-paderborn.de>

	Rewrite NIS code to allow empty keys.
	* nis/nss_nis/nis-ethers.c: Rewritten.
	* nis/nss_nis/nis-proto.c: Rewritten.
	* nis/nss_nis/nis-publickey.c: Rewritten.
	* nis/nss_nis/nis-rpc.c: Rewritten.
	* nis/nss_nis/nis-service.c: Rewritten.

1997-03-08 16:02  Andreas Jaeger  <aj@arthur.pfalz.de>

	* time/scheck.c (scheck): Add extra const to second argument.

	* time/private.h: Correct prototypes to match definition.

1997-03-08 05:30  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (iruserok): Use euidaccess instead of half-hearted
	switching of UID before opening .rhosts.

	* posix/regex.c: Merge with regex sources from Arnold Robbins'
	version in GNU awk.
	* posix/regex.h: Likewise.

	Add regex test suite by Tom Lord.
	* posix/Makefile (distribute): Add TESTS, TESTS2C.sed, and testcases.h.
	(tests): Add runtests.
	(before-compile): Add testcases.h.
	(testcases.h): New rule to generate header with tests.
	* posix/TESTS: New file.
	* posix/TESTS2C.sed.: New file.
	* posix/runtests.c: New file.
	* posix/testcases.h: New file.

	* time/ialloc.c: Update from tzcode1997c.
	* time/private.h: Likewise.
	* time/scheck.c: Likewise.
	* time/tzselect.ksh: Likewise.
	* time/zdump.c: Likewise.
	* time/zic.c: Likewise.

	* time/tzfile.c: Pretty print.

1997-02-24 07:12  Geoff Keating  <geoffk@ozemail.com.au>

	* stdio-common/vfscanf.c: Use __va_copy if available.

1997-03-06 13:50  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/malloc.c (mprotect) [_LIBC]: Define as __mprotect to
	clean up namespace.

1997-03-07 05:27  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sigaction.c: The user- and
	kernel-level sigaction structure is different.  handle this
	correctly.
	Bug report by Andres Jaeger <jaeger@informatik.uni-kl.de>.

1997-03-06 05:55  David Engel  <david@sw.ods.com>

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Also
	recognize cache entries with flag == 3.

1997-03-05 23:14  Ulrich Drepper  <drepper@cygnus.com>

	* time/antarctica: Update from tzdata1997c.
	* time/asia: Likewise.
	* time/zone.tab: Likewise.

1997-03-04 19:14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/__math.h: Update feature tests.
	(fabs): Remove defininition, it is a gcc builtin.
	(sqrt, __sqrt): Remove definition, they have wrappers in libm.

1997-03-05 03:59  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (__ivaliduser): Don't use getline, but __getline
	instead to avoid namespace problems.
	Reported by David Mosberger-Tang <davidm@AZStarNet.COM>.

1997-03-04 04:31  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/poll.c: Implement poll function by
	falling back to select-based implementation if syscall isn't
	available.
	* sysdeps/unix/sysv/linux/syscalls.list: Add s_poll.

	* time/leapseconds: Update from tzdata1997b.
	* time/zic.c: Update from tzcode1997b.

1997-03-01 15:08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/Makefile $(tzfiles:%=$(objpfx)z.%): Remove unneeded
	depedencies between installed $(tzlinks) and $(tzbases) files.

1997-03-01 14:27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/math.h: Make compatible with traditional preprocessor;
	requires carefull placement of whitespace in macro arguments.
	Use __CONCAT instead of ##.
	Declare long double functions only if __STDC__ or __GNUC__.
	* math/mathcall.h: Avoid whitespace before argument of macro call
	that is used as function name.

	* sysdeps/m68k/fpu/__math.h: Use __CONCAT instead of ##.
	(__m81_u, __m81_inline): Depend on __LIBC_M81_MATH_INLINES instead
	of __NO_M81_MATH_INLINES.
	[!__LIBC_M81_MATH_INLINES]: Don't define internal functions
	starting with __ieee754.
	[!__NO_MATH_INLINES && __OPTIMIZE__]: Define user visible
	functions as inlines.
	(__m81_defun): Put __attribute__ between return type and function
	name.
	* math/math.h: Include <__math.h> also if __LIBC_M81_MATH_INLINES
	is defined.
	* sysdeps/m68k/fpu/e_acos.c: Define __LIBC_M81_MATH_INLINES
	instead of __NO_M81_MATH_INLINES.
	* sysdeps/m68k/fpu/e_fmod.c: Likewise.
	* sysdeps/m68k/fpu/k_cos.c: Likewise.
	* sysdeps/m68k/fpu/k_sin.c: Likewise.
	* sysdeps/m68k/fpu/k_tan.c: Likewise.
	* sysdeps/m68k/fpu/s_atan.c: Likewise. De-ANSI-declify.
	* sysdeps/m68k/fpu/s_frexp.c: Likewise.
	* sysdeps/m68k/fpu/s_ilogb.c: Likewise.
	* sysdeps/m68k/fpu/s_isinf.c: Likewise.
	* sysdeps/m68k/fpu/s_modf.c: Likewise.
	* sysdeps/m68k/fpu/s_scalbn.c: Likewise.

1997-02-28 03:27  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strtod.c (STRTOF): Make sure return value is large enough
	so that clearing second word is necessary.

	* sysdeps/unix/sysv/linux/netinet/in_systm.h: Don't use kernel
	header since it is wrong for 64 bit systems.
	Patch by a sun <asun@zoology.washington.edu>.

1997-02-27 10:34:11  Richard Henderson  <rth@tamu.edu>

	* sysdeps/unix/sysv/linux/alpha/brk.S: Support both the Linux/i386
	and OSF/1 style brk syscalls.  We may want to change Linux/Alpha
	for the benefit of running foreign binaries.

1997-02-27 05:12  Ulrich Drepper  <drepper@cygnus.com>

	* manual/Makefile: Add rules to run and distribute xtract-typefun.
	* manual/xtract-typefun.awk: New file.  Script to extract function,
	variable, macro anchor to put into the `dir' file.

	* sysdeps/libm-i387/e_acoshl.c: Clear upper half of word containing
	exponent before comparing.

1997-02-27 01:13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/netinet/in.h (htonl, htons, ntohl, ntohs): Change
	prototypes to use types with explicit width.  `unsigned long' is
	different on 64 bit systems.
	* sysdeps/unix/sysv/linux/netinet/in.h: Likewise.
	* sysdeps/generic/htonl.c: Likewise.
	* sysdeps/generic/htons.c: Likewise.
	* sysdeps/generic/ntohl.c: Likewise.
	* sysdeps/generic/ntohs.c: Likewise.
	Suggested by a sun <asun@zoology.washington.edu>.

1997-02-26 08:30  Andreas Jaeger  <aj@arthur.pfalz.de>

	* math/math.h: Include <__math.h> if __NO_MATH_INLINES is not
	defined and we want optimization.

1997-02-02 19:53  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* misc/getpass.c: Don't disable canonical input.
	Reverted patch of Mon Jan  6 01:35:29 1997.

1996-12-14 22:07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/libioP.h (_IO_finish_t): Take additional parameter, to
	match the hidden __in_chrg parameter of the destructor.
	(_IO_FINISH): Pass zero for it.
	* libio/genops.c (_IO_default_finish): Add second parameter, which
	is ignored.
	* libio/memstream.c (_IO_mem_finish): Likewise.
	* libio/fileops.c (_IO_file_finish): Likewise.
	* libio/strops.c (_IO_str_finish): Likewise.  All callers changed.

1997-02-27 00:23  H.J. Lu  <hjl@lucon.org>

	* time/Makefile: Avoid using patterns in dependencies.

1997-02-26 03:28  Ulrich Drepper  <drepper@cygnus.com>

	* shadow/sgetspent_r.c (LINE_PARSER): Add missing ')'.

1997-02-25 15:11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/e_acoshf.S (__ieee754_acoshf): Test correct
	word on stack for overflow.

1997-02-24 23:05  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (malloc_get_state): New function.
	Saves global malloc state to an opaque data structure which
	is dynamically allocated in the heap.
	* malloc/malloc.c (malloc_set_state): New function.
	Restore previously obtained state.
	* malloc/malloc.h: Add declaration of malloc_get_state()
	and malloc_set_state().

1997-02-24 23:29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/s_cbrtl.c: Shift B1_EXP value to right
	position.

1997-02-24 17:38  Ulrich Drepper  <drepper@cygnus.com>

	* misc/error.c: Make error and error_at_line weak aliases of
	__error and __error_at_line respectively.
	Suggested by David Mosberger-Tang <davidm@AZStarNet.COM>.

1997-02-22 12:25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/C-time.c (_nl_C_LC_TIME): Add missing entry for
	time-era-num-entries.

1997-02-24 15:20  Jonathan T. Agnew  <jtagnew@amherst.edu>

	* glibcbug.in: Don't mention destination on MAIL_AGENT command line
	to avoid duplicate mail.

1997-02-23 02:32  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (printf_unknown): Correct printing of
	numeric values.

1997-02-23 04:38  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strtol.c (STRTOL): It is not illegal to parse a minus
	sign in the strtouXX functions.  The results gets simply negated.
	* stdlib/tst-strtol.c: Correct tests.

1997-02-22 03:02  Ulrich Drepper  <drepper@cygnus.com>

	* math/math.h: Prevent definition of struct exception when using
	C++.

1997-02-22 01:46  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/syscalls.list: Dup takes only one argument.
	Reported by Greg McGary.

1997-02-21 00:22  Miles Bader  <miles@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/readlink.c (__readlink): Use io_read rather
	than file_get_translator.

	* sysdeps/mach/hurd/defs.c, sysdeps/stub/defs.c, sysdeps/posix/defs.c
	(_cleanup): Use __fcloseall instead of fclose with a NULL stream.

1997-02-20 01:28  Miles Bader  <miles@gnu.ai.mit.edu>

	* hurd/fchroot.c (fchroot): Reparent DIR to make it a real root.
	* sysdeps/mach/hurd/chroot.c (chroot): Likewise.

1997-02-19 13:56  Miles Bader  <miles@gnu.ai.mit.edu>

	* sysdeps/mach/hurd/accept.c (accept): Don't segv if ADDR_LEN == 0
	but ADDR also == 0.

	* hurd/report-wait.c (_hurd_itimer_thread): Make a weak alias for
	now instead of a weak extern, as some old programs expect it to be
	defined by ld.so.

1997-02-18 15:39  Miles Bader  <miles@gnu.ai.mit.edu>

	* hurd/hurdfault.c (_hurdsig_fault_preempter): New weak alias.

	* sysdeps/mach/hurd/dl-sysdep.c (__hurd_threadvar_max,
	__hurd_threadvar_stack_offset): Restore initialized versions, so
	startup works correctly.

	* malloc/thread-m.h (mutex_trylock): Invert sense of return value.

1997-02-17 10:58  Miles Bader  <miles@gnu.ai.mit.edu>

	* malloc/thread-m.h (mutex_trylock): Define to be __mutex_trylock,
	not __mutex_try_lock.
	(tsd_setspecific): Cast DATA to (unsigned long) before storing.
	(tsd_getspecific): Case variable to (void *) before returning.

	* hurd/hurdinit.c (__libc_argv): Remove extern.
	(__libc_argc): New variable.

1997-02-15 10:23  Miles Bader  <miles@gnu.ai.mit.edu>

	* hurd/hurd/threadvar.h (enum __hurd_threadvar_index): Add
	_HURD_THREADVAR_MALLOC.
	* malloc/thread-m.h
	[_LIBC && !PTHREAD_MUTEX_INITIALIZER && MUTEX_INITIALIZER]
	(mutex_lock, mutex_unlock, mutex_trylock): Defined in terms of
	__mutex_*.
	(mutex_t): Type removed & replaced by new macro.
	(tsd_key_t): Typedef to int instead of pthread_key_t.
	(tsd_key_create, tsd_setspecific, tsd_getspecific): New macros.
	(__pthread_initialize): New macro, work around assumption of pthreads.
	(tsd_keys_alloced): New static variable.
	<hurd/threadvar.h>: New include.

	* hurd/report-wait.c (_hurd_itimer_thread): Make a weak extern.
	(_S_msg_report_wait): Check to see if _hurd_itimer_thread is
	defined before using it.

	* sysdeps/mach/hurd/i386/init-first.c (__libc_argv, __libc_argc):
	Make extern.
	* hurd/hurdinit.c (__libc_argv): Make extern.

	* hurd/getdport.c (_default_hurd_getdport_fn): New variable.
	(_hurd_getdport_fn): Now a weak alias to _default_hurd_getdport_fn.

	* sysdeps/mach/hurd/i386/init-first.c (__hurd_threadvar_max,
	__hurd_threadvar_stack_offset,
	__hurd_threadvar_stack_mask): New variables.
	* hurd/hurdsig.c (__hurd_sigthread_stack_base,
	__hurd_sigthread_stack_end, __hurd_sigthread_stack_variables):
	New variables (moved here from hurdstartup.c).
	* hurd/hurdstartup.c (__hurd_sigthread_stack_base,
	__hurd_sigthread_stack_end, __hurd_sigthread_stack_variables):
	Variables removed (moved to hurdsig.c).
	(__hurd_threadvar_max, __hurd_threadvar_stack_offset,
	__hurd_threadvar_stack_mask): Variables removed.
	* sysdeps/mach/hurd/dl-sysdep.c (__hurd_sigthread_stack_base,
	__hurd_sigthread_stack_end, __hurd_sigthread_stack_variables,
	__hurd_threadvar_max, __hurd_threadvar_stack_offset,
	__hurd_threadvar_stack_mask): Variables removed.

1997-02-14 14:07  Miles Bader  <miles@gnu.ai.mit.edu>

	* hurd/hurd.h (_hurd_pids_changed_stamp, _hurd_pids_changed_sync):
	Declare extern.

	* malloc/thread-m.h
	[_LIBC && !PTHREAD_MUTEX_INITIALIZER && MUTEX_INITIALIZER]
	(mutex_t): Type removed.
	(mutex_t): New macro.
	(mutex_trylock): New macro.
	(__x_mutex_lock, __x_mutex_unlock): New functions.
	(mutex_lock, mutex_unlock): New macros, redefining the behavior of
	the cthread definitions.
	(tsd_key_t): Typedef to cthread_key_t instead of pthread_key_t.
	(tsd_key_create, tsd_setspecific, tsd_getspecific): New macros.
	(mutex_lock, mutex_unlock, mutex_trylock, mutex_init): Macros removed.
	(__pthread_initialize): New macro, work around assumption of pthreads.

1997-02-20 17:51  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/netinet/in.h: Protect contents using
	__BEGIN/END_DECLS.  Reported by a sun <asun@zoology.washington.edu>.

	* inet/net/ethernet.h: Move to sysdeps/unix/sysv/linux/net.
	* inet/Makefile (headers): Remove net/ethernet.h.
	* sysdeps/unix/sysv/linux/Makefile: Install net/ethernet.h.
	* sysdeps/unix/sysv/linux/Dist: Distribute net/ethernet.h.

1997-02-20 19:19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/mman/syscalls.list: Explain msync interface.
	* sysdeps/unix/bsd/syscalls.list: Add msync with two parameters.

1997-02-19 01:37  Erik Troan  <ewt@redhat.com>

	* shadow/sgetspent_r.c: Accept empty third, fourth and fifth fields.

1997-02-20 14:44  Andreas Jaeger  <aj@arthur.pfalz.de>

	* stdio-common/test-fseek.c: Remove temporary file, add
	copyright.

1997-02-19 11:46  Ulrich Drepper  <drepper@cygnus.com>

	* string/strxfrm.c (STRCOLL): Correct handling of `position'
	levels with no non-IGNOREd element and handling of NUL byte.
	* string/strcoll.c (STRXFRM): Likewise.
	* locale/weight.h: Likewise.

	* shadow/sgetspent_r.c (LINE_PARSER): Add missing ')'.

1997-02-19 02:58  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locale.c: Check whether output of `locale -a'
	really is locale directory.  Also print locale aliases.

1997-02-19 01:02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/mman/syscalls.list: msync takes 3 arguments.
	Reported by Andreas Jaeger <aj@arthur.pfalz.de>.

1997-02-19 00:29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/bsd/sigsuspend.c: Call __sigpause with needed
	additional argument.

1997-02-18 22:13  Ulrich Drepper  <drepper@cygnus.com>

	* inet/net/ethernet.h: New file.
	* sysdeps/unix/sysv/linux/netinet/if_ether.c: Add BSD compatibility.
	* sysdeps/unix/sysv/linux/net/if_slip.h: New file.
	Contributed by a sun <asun@zoology.washington.edu>.

	* sysdeps/unix/sysv/linux/net/if_arp.h: Include <sys/socket.h>.
	* sunrpc/rpc/rpc_msg.h: Include <rpc/clnt.h>.
	Reported by a sun <asun@zoology.washington.edu>.

1997-02-18 03:28  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/bug10.c (main): Correct parameter.

	* string/strcoll.c: Update copyright.

1997-02-17 02:51  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/obstack.h: Add `extern "C"' protection.
	* posix/regex.h: Likewise.
	* io/ftw.h: Likewise.
	* misc/libgen.h: Likewise.
	* login/utmp.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/reboot.h: Likewise.
	* sysdeps/unix/sysv/linux/netinet/in.h: Likewise.
	* sunrpc/rpc/pmap_rmt.h: Likewise.
	* sunrpc/rpc/auth_des.h: Likewise.
	* elf/link.h: Likewise.
	* inet/netinet/ether.h: Likewise.
	Reported by HJ Lu.

1997-02-17 01:45  a sun  <asun@zoology.washington.edu>

	Linux specific network headers.
	* sysdeps/unix/sysv/linux/netinet/if_fddi.h: New file.
	* sysdeps/unix/sysv/linux/netinet/if_tr.h: New file.
	* sysdeps/unix/sysv/linux/netinet/ip_icmp.h: New file.
	* sysdeps/unix/sysv/linux/netinet/ip_fw.h: New file.
	* sysdeps/unix/sysv/linux/netinet/igmp.h: New file.
	* sysdeps/unix/sysv/linux/netinet/icmp.h: New file.
	* sysdeps/unix/sysv/linux/netinet/ip.h: New file.
	* sysdeps/unix/sysv/linux/netinet/tcp.h: New file.
	* sysdeps/unix/sysv/linux/netipx/ipx.h: New file.
	* sysdeps/unix/sysv/linux/netatalk/atalk.h: New file.
	* sysdeps/unix/sysv/linux/Dist: Add new network headers.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=misc] (sysdep_headers):
	Add sys/quota.h.
	[$(subdir)=inet] (sysdep_headers): Add new network header.

	* sysdeps/unix/sysv/linux/netinet/udp.h: Add Linux specific changes.
	* sysdeps/unix/sysv/linux/netinet/in.h: Likewise.

	* inet/netinet/ip.h: Move to sysdeps/generic.

1997-02-16 13:15 1997  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* inet/netinet/ip.h: Add protection.

1997-02-17 01:18  Ulrich Drepper  <drepper@cygnus.com>

	* misc/sys/syslog.h (prioritynames): Correct definition to use
	braces where necessary.
	(facilitynames): Likewise.
	Patch by Ronald F. Guilmette <rfg@monkeys.com>.
	Comment and beautify declarations.

1997-02-16 03:54  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/in.h: Declare bindresvport.
	Reported by fabsoft@fabserver1.zarm.uni-bremen.de.

1997-02-16 03:48  Thorsten Kukuk  <kukuk@weber.uni-paderborn.de>

	* nis/nss_nis/nis-ethers.c (_nss_nis_getethernam_r): Rename to
	_nss_nis_gethostton_r.
	(_nss_nis_getetherbyaddr_r): Rename to _nss_nis_getntohost_r.

1997-02-16 02:45  Ulrich Drepper  <drepper@cygnus.com>

	* intl/l10nflist.c (_nl_make_l10nflist): Fix bug in computation of
	length of abs_filename.

1997-02-15 22:37  Andy Berkheimer  <andy@tho.org>

	* resolv/gethnamaddr.c (gethostbyname2): Test for ':' in name before
	trying to resolv name as numeric IPv6 address.
	* nss/digits_dots.c: Likewise.

1997-02-13 22:32  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/localedef.c: Implement --quiet option.
	* locale/programs/charset.h: Declare be_quiet variable.
	* locale/programs/locfile.h: Likewise.
	* locale/programs/charmap.c: Don't print warnings if quiet option
	was given.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* locale/programs/locfile.c: Likewise.

1997-02-13 11:44  Andreas Jaeger  <aj@arthur.pfalz.de>

	* stdlib/qsort.c: Add prototype for _quicksort.

	* stdlib/msort.c (qsort): Correct prototype for _quicksort.

	* sysdeps/i386/Makefile (CFLAGS-rtld.c): Change to prevent warning
	from dl-machine.h.

1997-02-13 18:18  Marcus G. Daniels  <marcus@sysc.pdx.edu>

	* sysdeps/generic/dl-cache.c: Don't hardwire name of cache file.
	Allow user to overwrite it.

1997-02-13 17:55  Ulrich Drepper  <drepper@cygnus.com>

	* libio/_G_config.h: Make sure win_t is also defined for old gcc
	versions.  Reported by Andreas Jaeger.

1997-02-13 11:44  Andreas Jaeger  <aj@arthur.pfalz.de>

	* db/btree/bt_split.c (bt_psplit): Fix typo in  change of
	1997-02-12.

	* time/tzfile.c (__tzfile_read): Change comment to follow
	change of 1997-02-12.

1997-02-13 02:32  Ulrich Drepper  <drepper@cygnus.com>

	* time/time.h (__nanosleep): Define only when struct timespec is
	also available.
	Reported by Ross Alexander <rossa@stimpy.cs.auckland.ac.nz>.

1997-02-12 21:34  a sun  <asun@zoology.washington.edu>

	* sysdeps/unix/sysv/linux/netinet/udp.h: New file.
	* sysdeps/unix/sysv/linux/Dist: Add netinet/udp.h.

1997-02-12 21:16  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname_r): Follow patch
	of 1997-02-09 in resolv/gethnamaddr.c.

1997-02-11 18:52  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/_G_config.h (_G_wint_t): New.

1997-02-09 11:31  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* resolv/gethnamaddr.c (gethostbyname2): Change sizeof (buf)
	to sizeof (buf.buf) while calling res_search ().

1997-02-03 20:01  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* nis/rpcsvc/yp_prot.h (ypresp_key_val): Change key to keydat,
	val to keydat, stat to status.

1997-02-12 20:45  Andreas Jaeger  <jaeger@informatik.uni-kl.de>

	* time/tzfile.c (__tzfile_read): Fix problem with SUID programs.

1997-02-12 19:55  Ulrich Drepper  <drepper@cygnus.com>

	* db/btree/bt_split.c (bt_psplit): Apply official patches #2 and #4
	by Keith Bostic.

1997-02-11 14:49  Andreas Jaeger  <jaeger@informatik.uni-kl.de>

	* stdlib/atoll.c: Undefine atoll, not atol.

1997-02-08 09:36  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/Makefile ($(common-objpfx)sysd-syscalls): Remove
	unused arguments of shell script.

	* Makeconfig (all-object-suffixes): New variable.
	* Makerules ($(+sysdir_pfx)sysd-rules, +make-deps): Use it instead
	of $(object-suffixes).
	* sysdeps/unix/make-syscalls.sh: Likewise.  Fix comment.

1997-02-11 05:27  Ulrich Drepper  <drepper@cygnus.com>

	* locale/weight.h (collate_rules): It's an u_int32_t array.
	(get_weight): Compute initial SLOT value correctly.

1997-02-10 17:45  Ulrich Drepper  <drepper@cygnus.com>

	* string/argz-ctsep.c: Initialize *LEN when successful.

1997-02-09 02:59  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.2.

	* posix/Makefile (routines): Add getopt_init.
	* posix/getopt.c: Don't get environment variable with nonoption
	flags here.  Depend on __getopt_nonoption_flags variable filled
	somewhere else.  This is necessary since the variable must be
	removed even when getopt isn't used in case exec(2) gets called.
	* posix/getopt_init.c: New file.  Initialize __getopt_nonoption_flags
	and remove environment variable.
	* sysdeps/i386/init-first.c: Call __getopt_clean_environment.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* sysdeps/stub/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/init-first.c: Likewise.

	* sysdeps/generic/dl-sysdep.c (_dl_sysdep_start): Recognize
	AT_PAGESZ entry in auxiliary vector and store value in _dl_pagesize.

	* sysdeps/generic/crypt-entry.h: Return EOPNOTSUPP when DES
	encryption is wanted.

	* libio/vsnprintf.c: If MAXLEN is 0 return 0.
	* stdio/vsnprintf.c: Likewise.
	Reported by Philip Blundell <pjb27@cam.ac.uk>.

	* libio/vsnprintf.c: If MAXLEN is 0 return 0.
	* stdio/vsnprintf.c: Likewise.
	Reported by Philip Blundell <pjb27@cam.ac.uk>.

1997-02-07 17:43  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/sysd-stdio.c: Include <errno.h>.
	Change PTR to void *.
	* sysdeps/posix/vdprintf.c: Change PTR to void *.
	Reported by Brian Oxley <boxley%dev.cm.ssb.com@clipper.ssb.com>.

1997-02-07 17:41  Philip Blundell <pjb27@cam.ac.uk>

	* sysdeps/unix/sysv/linux/socketbits.h: Fix typo.

1997-02-06 13:49  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* rellns-sh: No need to check for existance of first parameter.

1997-02-06 13:49  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* rellns-sh: No need to check for existance of first parameter.

1997-02-06 14:50  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/posix/getcwd.c (__getcwd): Fix resource leaks.  Reported
	by David Holland <dholland@eecs.harvard.edu>.

1997-02-06 14:38  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/clnt_tcp.c (readtcp): Pass copy of timeout value to
	select, in case it is modified by the latter.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.
	* sunrpc/pmap_rmt.c (clnt_broadcast): Likewise.
	* sunrpc/svc_tcp.c (readtcp): Likewise.

	* sunrpc/svc_authux.c (_svcauth_unix): Fix type of area_gids
	array.

	* sunrpc/authuxprot.c (xdr_authunix_parms): Check size of uid_t
	and gid_t.

	* sunrpc/auth_unix.c (authunix_validate): Fix type of second
	argument.

1997-02-06 14:29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/Makefile (extra-objs): Don't zap previous value.
	* Makefile (before-compile): Likewise.  Don't add gnu/lib-names.h
	twice.

1997-02-06 14:19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/brk.c: Add workaround for
	braindamage (sigh!).

1997-02-06 17:10  Jim Meyering  <meyering@asic.sc.ti.com>

	* manual/memory.texi: Correct `copystring' example for obstacks.

1997-02-06 14:10  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Don't use [:lower:] and [:upper:] in tr since old
	GNU tr don't grok it.

1997-02-03 21:13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/socketbits.h [__GNUC__<2] (struct cmsghdr):
	Don't use GNU C extensions.
	(CMSG_DATA): Use portable definition.

1997-02-05 05:58  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldd.bash.in: Add test for read permission and print appropriate
	message.  Change warning and error messages to print "ldd: " at start.
	* elf/ldd.sh.in: Likewise.

	* stdlib/Makefile (routines): Add atoll.
	* stdlib/atoll.c: New file.
	* stdlib/stdlib.h: Add prototype and optimization for atoll.

	* stdlib/a64l.c: Update copyright.
	* stdlib/abs.c: Likewise.
	* stdlib/atof.c: Likewise.
	* stdlib/atoi.c: Likewise.
	* stdlib/atol.c: Likewise.
	* stdlib/bsearch.c: Likewise.
	* stdlib/exit.c: Likewise.
	* stdlib/fpioconst.c: Likewise.
	* stdlib/fpioconst.h: Likewise.
	* stdlib/jrand48.c: Likewise.
	* stdlib/jrand48_r.c: Likewise.
	* stdlib/labs.c: Likewise.
	* stdlib/lcong48.c: Likewise.
	* stdlib/lcong48_r.c: Likewise.
	* stdlib/llabs.c: Likewise.
	* stdlib/lrand48.c: Likewise.
	* stdlib/lrand48_r.c: Likewise.
	* stdlib/mblen.c: Likewise.
	* stdlib/mbstowcs.c: Likewise.
	* stdlib/mbtowc.c: Likewise.
	* stdlib/mp_clz_tab.c: Likewise.
	* stdlib/mrand48.c: Likewise.
	* stdlib/mrand48_r.c: Likewise.
	* stdlib/msort.c: Likewise.
	* stdlib/nrand48.c: Likewise.
	* stdlib/nrand48_r.c: Likewise.
	* stdlib/qsort.c: Likewise.
	* stdlib/rpmatch.c: Likewise.
	* stdlib/seed48.c: Likewise.
	* stdlib/seed48_r.c: Likewise.
	* stdlib/srand48.c: Likewise.
	* stdlib/srand48_r.c: Likewise.
	* stdlib/strtod.c: Likewise.
	* stdlib/wcstombs.c: Likewise.
	* stdlib/wctomb.c: Likewise.

1997-02-05 05:08  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/mp_clz_tab.c (__clz_tab): Follow change in GMP and define
	as const.

1997-02-04 23:57  Fila Kolodny  <fila@ibi.com>

	* sysdeps/unix/sysv/linux/socketbits.h: Define __need_NULL before
	including <stddef.h>.

1997-02-03 20:01  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* time/Makefile (tzbases, tzlinks): New.
	(tzfiles): Changed to $(tzbases) $(tzlinks).
	($(tzfiles:%=$(objpfx)z.%): Make $(tzlinks) depend on $(tzbases).

1997-02-02 12:13  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* Makefile (install): Ignore error from ldconfig.

	* time/zic.c (mkdirs): Double check the error return of mkdir ().

1997-02-04 22:01  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c: Prepare to use __va_copy for architectures
	like PPC where va_list is no integral type.

1997-02-04 15:27  Roma Ekzhanov  <ekzhanov@paragraph.com>

	* posix/getopt.c (exchange): Don't allocate nonoption_flags array
	if nonoption_flags_len == -1.

1997-02-04 02:08  Ulrich Drepper  <drepper@cygnus.com>

	* Version 2.0.1 net release.

1997-02-03 23:34  Stephen L Moshier  <moshier@world.std.com>

	* sysdeps/libm-ieee754/s_tanhl.c: Fix backwards result sign.

1997-02-03 19:59  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/getsubopt.c: Don't return `=' for suboption which has
	a parameter.  Reported by Gary L. Hennigan <glhenni@cs.sandia.gov>.

1997-02-03 18:20  Thorsten Kukuk  <kukuk@weber.uni-paderborn.de>

	* nis/rpcsvc/yp_proh.h (ypresp_key_val): Also change order of
	values as in yp.x and yp.h.

1997-02-03 16:58  Ulrich Drepper  <drepper@cygnus.com>

	* nis/rpcsvc/yp.x (struct ypresp_key_val): Revert patch from
	1997-02-03 02:17.  Sun's implementation internally corrects
	this bug but we don't want to hide this from the user.
	* nis/rpcsvc/yp.h: Likewise.

1997-02-01 18:28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/net/ppp_defs.h: Protect against multiple
	inclusion.

1997-02-02 14:56  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/nss.texi, manual/pattern.texi, manual/string.texi: Doc
	fixes.

1997-02-02 11:51  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* MakeTAGS (sysdep-sources, sysdep-headers): New variables.
	(all-sources, all-headers): Use them instead of $(sources) and
	$(headers) when searching in sysdep directories.

1997-02-02 11:49  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (REAL_MAKE_VERSION): Use internal make function
	instead of shelling out.

1997-02-02 11:47  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/Makefile (install-test-data): Remove mkdir command, zic can
	handle that gracefully.

1997-02-03 14:07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/asm-syntax.h: Add back file which got lost sometime
	somehow.

1997-02-02 07:46  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/Makefile: Check $(cross-compiling) only after including
	../Makeconfig.
	($(objpfx)rpcsvc/%.h, $(objpfx)x%.c): Add empty command to force
	being considered as a rule.
	(generated): Add stamp files before the inclusion of Makerules to
	magically mark them as not being intermediate via the `generated'
	target.

1997-02-03 02:33  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-deps.c (_dl_map_object_deps): Handle multiple AUXILIARY
	entries.  This is still no complete implementation since AUXILIARY
	entries in other shared objects are not yet handled.

	* libio/libio.h (_IO_cookie_io_functions_t): Move to C++ protected
	place.

	* po/es.po: Update.
	* po/fr.po: Update.
	* po/nl.po: Update.

	* time/Makefile: Better cross-compile support.  Avoid test which
	cannot be run.
	(CFLAGS-tzset.c): New variable.  Overwrite TZDEFAULT value from
	tzfile.h file.
	* time/tzfile.c (__tzfile_read): Allow TZDEFAULT start with '/' even
	in SUID programs.
	* time/tzset.c (__tzset_internal): If TZ envvar is not set use same
	default values as in tzfile.c.

	* elf/dynamic-link.h (elf_get_dynamic_info): Recognize versioning
	tags.
	* elf/link.h: Likewise.
	* elf/elf.h: Add tag definitions and data structures for versioning.

1997-02-03 02:17  Ulrich Drepper  <drepper@cygnus.com>

	* nis/rpcsvc/yp.x (struct ypresp_key_val): There is not stupid
	"Sun bug".  This is the order of elements also used by 4.4BSD.
	* nis/rpcsvc/yp.h: Likewise.
	Reported by HJ Lu.

1997-02-02 12:13  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* sunrpc/Makefile ($(objpfx)x%.h, $(objpfx)x%.c): Add "@:" as
	action.

	* Makefile (install): Pass installation directories as arguments
	to ldconfig.

1997-02-02 23:15  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (__after_morecore_hook): New variable.
	(malloc_extend_top): Call __after_morecore_hook if set.
	(main_trim): Likewise.
	* malloc/malloc.h: Add declaration of __after_morecore_hook.
	Suggested by Marcus Daniels.

1997-02-02 23:00  Marcus G. Daniels  <marcus@tdb.com>

	* malloc/malloc.c (rEALLOc): Protect tsd_setspecific call by
	#ifndef NO_THREADS.
	(mallinfo): Likewise.

	* malloc/malloc.c (__morecore): Make external since it is used in
	programs.

1997-02-02 15:10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/statbuf.h (struct stat): Make st_dev field
	unsigned.

1997-02-01 23:36  Richard Henderson  <rth@tamu.edu>

	* sysdeps/alpha/stxncpy.S ($unaligned) [src % 8 > dst % 8]: Don't
	use t6 as a temporary; it contains bits we still need in $u_head.

1997-01-31 15:05  John Bowman  <bowman@ipp-garching.mpg.de>

	* sysdeps/i386/fpu/__math.h [__USE_MISC]: Don't declare prototypes
	using __ prefix.  Add prototype for log1p.

1997-02-02 00:39  Ulrich Drepper  <drepper@cygnus.com>

	* dirent/dirent.h: Add description _DIRENT_HAVE_D_TYPE.

1997-02-01 17:04  Philip Blundell  <pjb27@cam.ac.uk>

	* inet/netinet/ip.h (MAX_IPOPTLEN): Add definition.

1997-02-01 17:00  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/socketbits.h: Add definition of cmsghdr
	structure plus related macros.
	* sysdeps/unix/sysv/linux/cmsg_nxthdr.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=socket]
	(sysdep_routines): Add cmsg_nxthdr.
	* sysdeps/unix/sysv/linux/Dist: Add cmsg_nxthdr.c.
	Suggested by Philip Blundell <pjb27@cam.ac.uk>.

1997-02-01 12:34  Ulrich Drepper  <drepper@cygnus.com>

	* time/strftime.c: Define _strftime_copytm without protecting arguments
	which breaks the definition.

1997-02-01 03:31  Thorsten Kukuk  <kukuk@weber.uni-paderborn.de>

	* nis/rpcsvc/yp_prot.h: Move definition of yppushresp_xfr after
	definition of type for element.

1997-02-01 03:28  Philip Blundell  <pjb27@cam.ac.uk>

	* sydsdeps/unix/sysv/linux/netinet/in.h: Add IPv6 related IPPROTO_*
	constants.

1997-02-01 03:09  H.J. Lu  <hjl@lucon.org>

	* Makefile: Pass PARALLELMFLAGS to sub-makes.
	* Makefile.in: Mention PARALLELMFLAGS and pass to main Makefile.

1997-01-31  Paul Eggert  <eggert@twinsun.com>

	* time/mktime.c (HAVE_LIMITS_H, HAVE_LOCALTIME_R, STDC_HEADERS):
	Define if _LIBC is defined.
	<limits.h>: Include if HAVE_LIMITS_H instead of if
	__STDC__ || __GNU_LIBRARY__ || STDC_HEADERS.
	<stdlib.h>: Similarly, include if STDC_HEADERS.
	(localtime_r): Redo #ifdef to make it clear that glibc has
	localtime_r now.

1997-02-29 20:08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/Makefile ($(objpfx)rpcsvc/%.h, $(objpfx)x%.c): Use stamp
	file to avoid unnecessary recompilation.

1997-01-29 19:33  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile: Set install-others, not install_others.
	(before-compile): Use += to preserve previous value.
	($(inst_includedir)/gnu/lib-names.h): Remove obsolete comment and
	fix dependency name.
	($(objpfx)lib-names.h): Remove rule.
	* Makeconfig ($(common-objpfx)gnu/lib-names.h): Generate it here,
	with correct name, using an intermediate stamp file.
	(common-generated): Add gnu/lib-names.h.
	(before-compile): Add $(common-objpfx)gnu/lib-names.h.

1997-01-30 18:29  Richard Henderson  <richard@atheist.tamu.edu>

	* malloc/malloc.c (MAGICBYTE): Use cast to size_t instead of unsigned
	to prevent warnings on 64 bit systems.
	Reported by Paul Wouters <paul@xtdnet.nl>.

	* sysdeps/alpha/dl-machine.h: Revert check for broken gas.  By default
	we assume it works.

1997-01-30 03:24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/elf/start.S (_start): Align stack pointer to
	double word boundary before pushing args for main.  This way we
	don't get penalties for misaligned memory accesses.  Reported by
	Edward Seidl <seidl@janed.com>.

	* Makefile: Correct *my* changes of Richards patch of 1997-01-28 10:51.
	Patch by HJ Lu.

	* misc/bsd-compat.c: Update copyright.
	* misc/efgcvt.c: Likewise.
	* misc/efgcvt_r.c: Likewise.
	* misc/error.c: Likewise.
	* misc/error.h: Likewise.
	* misc/fstab.c: Likewise.
	* misc/init-misc.c: Likewise.
	* misc/lsearch.c: Likewise.
	* misc/mntent.c: Likewise.
	* misc/qefgcvt.c: Likewise.
	* misc/qefgcvt_r.c: Likewise.
	* nss/databases.def: Likewise.
	* nss/db-Makefile: Likewise.
	* nss/ethers-lookup.c: Likewise.
	* nss/hosts-lookup.c: Likewise.
	* nss/netgrp-lookup.c: Likewise.
	* nss/nsswitch.h: Likewise.
	* nss/proto-lookup.c: Likewise.
	* nss/rpc-lookup.c: Likewise.
	* nss/service-lookup.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_files/files-grp.c: Likewise.
	* nss/nss_files/files-hosts.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-proto.c: Likewise.
	* nss/nss_files/files-pwd.c: Likewise.
	* nss/nss_files/files-rpc.c: Likewise.
	* nss/nss_files/files-service.c: Likewise.
	* nss/nss_files/files-spwd.c: Likewise.
	* shadow/fgetspent.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* shadow/getspent.c: Likewise.
	* shadow/getspent_r.c: Likewise.
	* shadow/getspnam.c: Likewise.
	* shadow/getspnam_r.c: Likewise.
	* shadow/putspent.c: Likewise.
	* shadow/sgetspent.c: Likewise.
	* shadow/sgetspent_r.c: Likewise.
	* sysdeps/i386/init-first.c: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.

	* shadow/shadow.h: Don't use __USE_REENTRENT.  All code must be
	prepared to be running in a multi-threaded environment.  Change
	to __USE_MISC unless the function is defined in POSIX.1 (in this
	case also test for __USE_POSIX).
	* dirent/dirent.h: Likewise.
	* grp/grp.h: Likewise.
	* inet/aliases.h: Likewise.
	* libio/libio.h: Likewise.
	* libio/stdio.h: Likewise.
	* login/utmp.h: Likewise.
	* math/mathcalls.h: Likewise.
	* misc/mntent.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resolv/netdb.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* string/string.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sysdeps/generic/crypt.h: Likewise.
	* sysdeps/unix/sysv/linux/errnos.h: Likewise.
	* time/time.h: Likewise.

1997-01-30 00:27  Fila Kolodny  <fila@ibi.com>

	* sunrpc/Makefile (install-others): Add rpcsvc/bootparam_prot.h
	only if not cross compiling.

1997-01-29 16:16  Fila Kolodny  <fila@ibi.com>

	* sysdeps/posix/sigpause.c: Include <stddef.h> to get definition of
	NULL.
	* sysdeps/posix/sigwait.c: Likewise.

1997-01-28 23:42  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig ($(common-objpfx)config.make): Depend on
	$(..)config.make.in.

1997-01-29 04:30  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/Makefile: Don't generate headers derived from .x files when
	crosscompiling.

1997-01-28 10:51  Richard Henderson  <rth@tamu.edu>

	* Makefile: Generate gnu/lib-names.h in before-compile.
	* nss/nss.h (NSS_SHLIB_REVISION): Turn it into a const variable.
	* nss/nssswitch.c (__nss_shlib_revision): New variable.  Initialize
	to the revision found for LIBNSS_FILES_SO.
	(nss_initilized): Removed.  It was tested but never set.
	(nss_lookup_function): Don't treat NSS_SHLIB_REVISION as a literal.

	* shlib-versions: Tag all alpha-linux shlibs with a .1 "minor"
	not just libc.  Except instead of ld.so.1.1 use ld-linux.so.2.

	* sysdeps/unix/sysv/linux/alpha/ieee_set_fp_control.S: Typo in ldgp.

1997-01-28 12:16  Andreas Jaeger  <aj@arthur.pfalz.de>

	* elf/Makefile (CFLAGS-dl-load.c): Use += to not
	override the definition.

1997-01-28 20:13  Fila Kolodny  <fila@ibi.com>

	* config.make.in (malloc): Remove.

1997-01-28 04:23  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.1.

	* posix/getopt.c: Handle another problem introduced by the
	nonoption_flags array.  We must be able to work with reordered
	argv arrays.  Reported by Andreas Schwab.

1997-01-28 02:38  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/clone.S: Correct handling of new
	stack.

1997-01-27 17:34  Thorsten Kukuk <kukuk@weber.uni-paderborn.de>

	* nis/rpcsvc/yp_prot.h: Correct definitions and types in file so
	that it works with yp.h.

1997-01-27 13:28  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.h (__malloc_initialized) [_LIBC]: Define as
	__libc_malloc_initialized so that this variable is not shared with
	other users of GNU malloc.
	Suggested by Martin von Loewis <martin@mira.isdn.cs.tu-berlin.de>.

	* mcheck.h: Correct typo.  Use malloc/ instead of new-malloc/.

	* sysdeps/i386/Makefile (CFLAGS-dl-load.c, CFLAGS-dl-reloc.c): New
	variables to prevent warnings.
	* sysdeps/i386/dl-machine.h (fixup): Add prototype and declare
	using attribute regparm.
	(ELF_MACHINE_RUNTIME_TRAMPOLINE): Rewrite so that no register
	is changed by the resolver code.

1997-01-14 14:20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/malloc.c (weak_variable): Define.
	(__malloc_initialize_hook, __free_hook, __malloc_hook, __realloc_hook,
	__memalign_hook): Make them weak definitions.

1997-01-26 11:35  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/getdents.c: Don't write beyond buffer
	limits, correctly take structure padding into account, use correct
	offset when resetting the stream, change heuristic to assume an
	average name length of 14 characters.

1997-01-25 18:06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/alpha/termbits.h: Protect against multiple
	inclusion.


See ChangeLog.6 for earlier changes.
